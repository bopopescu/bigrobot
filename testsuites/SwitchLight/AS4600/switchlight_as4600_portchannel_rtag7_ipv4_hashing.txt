*Settings
Documentation               BigTap SwitchLight Platform Test Suite
Suite Setup                 rtag7 suite setup
Suite Teardown              rtag7 suite teardown
Test Setup                  rtag7 test setup
Test Teardown               rtag7 test teardown
Force Tags                  BigTap  SwitchLight  accton-as4600  switch-platform  RTAG7_IPv4  lag  hashing 
Library                     keywords/BsnCommon.py
Library                     keywords/AppController.py
Library                     keywords/BigTap.py
Library                     keywords/SwitchLight.py
Library                     keywords/Ixia.py
Library                     Collections.py
Library                     OperatingSystem.py
Library                     String.py

* Variable
${switchlight_version}                  Switch Light OS SWL-BT-
${s1_1g_name_1}                         port-channel1  
${s1_1g_port_range_1}                   13,15,17,19
${s1_1g_port_range_small_1_1}           13,15
${s1_1g_port_range_small_1_2}           17,19
${s1_1g_number_1}                       1
${s1_lag_mem_1_1}                       13          
${s1_lag_mem_1_2}                       15          
${s1_lag_mem_1_3}                       17          
${s1_lag_mem_1_4}                       19          

${s1_1g_name_2}                         port-channel2
${s1_1g_port_range_2}                   14,16,18,20
${s1_1g_port_range_small_2_1}           14,16
${s1_1g_port_range_small_2_2}           18,20
${s1_1g_number_2}                       2
${s1_lag_mem_2_1}                       14          
${s1_lag_mem_2_2}                       16          
${s1_lag_mem_2_3}                       18          
${s1_lag_mem_2_4}                       20          

${policy_name_1}                        RTAG7_POLICY_1
${filter_1}                             ethernet1
${filter_nick_1}                        ixia-2-1
${delivery_1}                           port-channel1
${delivery_nick_1}                      rtag7_delivery

${policy_name_2}                        RTAG7_POLICY_2
${filter_2}                             port-channel2
${filter_nick_2}                        rtag7_filter
${delivery_2}                           ethernet2
${delivery_nick_2}                      ixia-2-2

${src_mac}                              00:11:01:01:01:01  
${src_mac_step}                         00:00:00:00:01:00
${src_cnt}                              28
${dst_mac}                              00:12:01:01:01:01
${dst_cnt}                              28
${dst_mac_step}                         00:00:00:00:01:00
${frame_rate}                           10000
${frame_cnt}                            100000
${frame_cnt_1}                          10000
${frame_size}                           64
${src_port}                             8101
${dst_port}                             8201
${range}                                16

*Test Case
TC001: Verify Configuration
    verify portchannel interface is up   s1  ${s1_1g_name_1}
    verify portchannel interface is up   s1  ${s1_1g_name_2}
    [Tags]  full  feature  

#### L3 IPv4 Single Tuple hashing
TC002: Verify destination IPv4 address hashing
    config  node=s1  cmd=hash ipv4 dst-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=${frame_cnt}  no_arp=True   name=atob_dst_ip
    ...     src_mac=${src_mac}  src_mac_step=00:00:00:00:00:00
    ...     src_ip=100.1.1.1  src_ip_step=0.0.0.0  src_cnt=1  src_gw_prefix=24  src_gw=100.1.1.2  src_gw_step=0.0.0.1
    ...     dst_mac=${dst_mac}  dst_mac_step=00:00:00:00:00:0  protocol=TCP  src_port=1234  dst_port=80
    ...     dst_ip=100.1.1.2  dst_ip_step=0.0.0.1  dst_cnt=28  dst_gw_prefix=24  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0
    send and verify traffic
    [Tags]  full  feature  traffic

TC003: Keeping destination IPv4 address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${src_port}=  Evaluate  ${port} + 1234
    \   ${dst_port}=  Evaluate  ${port} + 2345
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=24
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=24
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  vlan_step=0  vlan_cnt=1  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC004: Verify L4 destination port address hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  1001  1033  2
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  src_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.1  src_ip_step=0.0.0.0  src_cnt=1  src_gw_prefix=24  src_gw=100.2.1.1  src_gw_step=0.0.0.0
    \   ...     dst_mac=${dst_mac}  dst_mac_step=00:00:00:00:00:00
    \   ...     dst_ip=100.2.1.1  dst_ip_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=24  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0
    \   ...     protocol=TCP  src_port=8080  dst_port=${port}  name=atob_l4_dst_port
    send and verify traffic
    [Tags]  full  feature  traffic

TC005: Keeping L4 destination port address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.2.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  vlan_step=0  vlan_cnt=1  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC006: Verify L4 source port address hashing
    config  node=s1  cmd=hash ipv4 l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  1001  1033  2
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  src_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.1  src_ip_step=0.0.0.0  src_cnt=1  src_gw_prefix=24  src_gw=100.2.1.1  src_gw_step=0.0.0.0
    \   ...     dst_mac=${dst_mac}  dst_mac_step=00:00:00:00:00:00
    \   ...     dst_ip=100.2.1.1  dst_ip_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=24  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0
    \   ...     protocol=TCP  src_port=${port}  dst_port=80  name=atob_l4_src_port
    send and verify traffic
    [Tags]  full  feature  traffic  

TC007: Keeping L4 source port address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.2.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${port}  name=atob_l4_src_port
    \   ...     vlan_id=${port}  vlan_step=0  vlan_cnt=1  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC008: Verify protocol hashing
    config  node=s1  cmd=hash ipv4 protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  1  17
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  src_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.1  src_ip_step=0.0.0.0  src_cnt=1  src_gw_prefix=24  src_gw=100.2.1.1  src_gw_step=0.0.0.0
    \   ...     dst_mac=${dst_mac}  dst_mac_step=00:00:00:00:00:00
    \   ...     dst_ip=100.2.1.1  dst_ip_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=24  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0
    \   ...     protocol=${port}  name=atob_l4_src_port
    send and verify traffic
    [Tags]  full  feature  traffic

TC009: Keeping protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.2.  ${port}
    \   ${src_port}=  Evaluate   ${port} + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${port}  name=atob_l4_src_port
    \   ...     vlan_id=${port}  vlan_step=0  vlan_cnt=1  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  
    
TC010: Verify source IPv4 address hashing
    config  node=s1  cmd=hash ipv4 src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=${frame_cnt}  no_arp=True   name=atob_src_ip
    ...     src_mac=${src_mac}  src_mac_step=00:00:00:00:00:00
    ...     src_ip=100.1.1.1  src_ip_step=0.0.2.0  src_cnt=28  src_gw_prefix=24  src_gw=100.2.1.1  src_gw_step=0.0.0.0
    ...     dst_mac=${dst_mac}  dst_mac_step=00:00:00:00:00:00
    ...     dst_ip=100.2.1.1  dst_ip_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=24  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0
    send and verify traffic
    [Tags]  full  feature  traffic

TC011: Keeping source IPv4 address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=${frame_cnt}  no_arp=True   name=atob_src_ip
    ...     src_mac=${src_mac}  src_mac_step=00:00:00:00:00:00
    ...     src_ip=100.1.1.1  src_ip_step=0.0.0.0  src_cnt=1  src_gw_prefix=24  src_gw=100.1.1.100  src_gw_step=0.0.0.1
    ...     dst_mac=${dst_mac}  dst_mac_step=00:00:00:00:00:00
    ...     dst_ip=100.1.1.100  dst_ip_step=0.0.0.1  dst_cnt=28  dst_gw_prefix=24  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0
    ...     vlan_id=100  vlan_step=100  vlan_cnt=28  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC012: Verify vlan-id hashing
    config  node=s1  cmd=hash ipv4 vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=${frame_cnt}
    ...     src_mac=00:01:01:01:01:01  dst_mac=00:02:02:02:02:02  src_ip=100.1.1.1  dst_ip=100.1.1.2
    ...     vlan_id=100  vlan_step=100  vlan_cnt=28  no_arp=True  ethertype=8100   name=atob_vlan_id
    send and verify traffic
    [Tags]  full  feature  traffic

TC014: Keeping vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.2.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.1  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.1  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=${port}  name=atob_vlan
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic
    
#### L3 IPv4 Two Tuple hashing
TC015: Verify destination IPv4 address and L4 destination port hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  5  85  5
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.1  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=8080  dst_port=${port}  name=atob_l4_dst_port
    send and verify traffic
    [Tags]  full  feature  traffic  

TC016: Keeping destination IPv4 address and L4 destination port constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  5  85  5
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.1  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=8080  name=atob_l4_src_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC017: Verify destination IPv4 address and L4 source port hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  5  85  5
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${port}  dst_port=8080  name=atob_l4_dst_port
    send and verify traffic
    [Tags]  full  feature  traffic
    
TC018: Keeping destination IPv4 address and L4 source port constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  5  85  5
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.1  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=8080  dst_port=${port}  name=atob_l4_src_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC019: Verify destination IPv4 address and protocol hashing
    config  node=s1  cmd=hash ipv4 dst-ip protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=100.1.1.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.1  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.1.1  dst_gw_step=0.0.0.1  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC020: Keeping destination IPv4 address and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  5  85  5
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${src_ip_port}=  Evaluate  ${port} + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.1  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_ip_port}  dst_port=${port}  name=atob_l4_src_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC021: Verify destination IPv4 address and source IPv4 address hashing
    config  node=s1  cmd=hash ipv4 dst-ip src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.1  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.1  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC022: Keeping destination IPv4 address and source IPv4 address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.1    src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=100.1.1.1    dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=${port}  name=atob_l4_src_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC023: Verify destination IPv4 address and vlan-id hashing
    config  node=s1  cmd=hash ipv4 dst-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=100.1.1.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC024: Keeping destination IPv4 address and vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=${port}  name=atob_l4_src_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC025: Verify L4 source and destination port hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=100.1.1.1  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC026: Keeping L4 source and destination port constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.2.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_src_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC027: Verify L4 destination port and protocol hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}  dst_mac=${dst_mac}
    \   ...     src_ip=100.1.1.1  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC028: Keeping L4 destination port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.2.  ${port}
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_src_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  
 
TC029: Verify L4 destination port and source IPv4 address hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC030: Keeping L4 destination port and source IPv4 address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic
 
TC031: Verify L4 destination port and vlan-id hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.150  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=100.1.1.150  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC032: Keeping L4 destination port and vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC033: Verify L4 source port and protocol hashing
    config  node=s1  cmd=hash ipv4 l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.150  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=100.1.1.150  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC034: Keeping L4 source port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC035: Verify L4 source port and source IPv4 address hashing
    config  node=s1  cmd=hash ipv4 l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${port}  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC035: Keeping L4 source port and source IPv4 address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC036: Verify L4 source port and vlan-id hashing
    config  node=s1  cmd=hash ipv4 l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.150  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=100.1.1.150  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${port}  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC037: Keeping L4 source port and vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

TC038: Verify protocol and source IPv4 address hashing
    config  node=s1  cmd=hash ipv4 protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC039: Keeping protocol and source IPv4 address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${src_port}=  Evaluate  1123 + ${port}
    \   ${vlan}=  Evaluate  1223 + ${port}    
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.200  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.200  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC040: Verify protocol and vlan-id hashing
    config  node=s1  cmd=hash ipv4 protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${vlan}=  Evaluate  1123 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.100  src_gw=100.1.1.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.200  dst_gw=100.1.1.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC041: Keeping protocol and vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.100.200.  ${port}
    \   ${src_port}=  Evaluate  1123 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC043: Verify source IPv4 address and vlan-id hashing
    config  node=s1  cmd=hash ipv4 src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.1.1.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.1.1.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=8080  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC044: Keeping source IPv4 address and vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.200  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.200  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${port}  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic

#### L3 IPv4 Three Tuple hashing

TC045: Verify destination IP, L4 source and destination port based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

TC046: Keeping destination IP, L4 source and destination port constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=2980  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC047: Verify destination IP, L4 destination port and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC048: Keeping destination IP, L4 destination port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=2980  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC049: Verify source and destination IPv4 address and L4 destination port based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC050: Keeping source and destination IPv4 address and L4 destination port constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=2980  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC051: Verify destination IPv4 address, L4 destination port and vlan-id based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC052: Keeping destination IPv4 address, L4 destination port and vlan-id constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=2980  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC053: Verify destination IP, L4 source port and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC054: Keeping destination IP, L4 source port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC055: Verify source and destination IPv4 address and L4 source port based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC056: Keeping source and destination IPv4 address and L4 source port constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port}+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC057: Verify destination IPv4 address, L4 source port and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${vlan}=  Evaluate  1234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC058: Keeping destination IPv4 address, L4 source port and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC059: Verify source and destination IPv4 address and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.1.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC060: Keeping source and destination IPv4 address and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${vlan}=   Evaluate  1295+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id= ${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC061: Verify destination IPv4 address, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${vlan}=  Evaluate  1234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.1.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.1.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC062: Keeping destination IPv4 address, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${src_port}=   Evaluate  1295+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id= 100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC063: Verify source and destination IPv4 address, and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.200.  ${port}
    \   ${vlan}=  Evaluate  1234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC064: Keeping source and destination IPv4 address, and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  ${port}+${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${src_port}=   Evaluate  1295+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC065: Verify L4 source and destination port and protocol based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  

TC066: Keeping L4 source and destination port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${vlan}=   Evaluate  1295+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC067: Verify L4 source and destination port and source IP address based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC068: Keeping L4 source and destination port and source IP address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${vlan}=   Evaluate  1295+${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC069: Verify L4 source and destination port and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC070: Keeping L4 source and destination port and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC071: Verify L4 destination port, protocol and source IP Address based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC072: Keeping L4 destination port, protocol and source IP Address constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC073: Verify L4 destination port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${vlan}=  Evaluate  1975 + ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC074: Keeping L4 destination port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC075: Verify L4 destination port, source IPv4 address and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC076: Keeping L4 destination port, source IPv4 address and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC077: Verify L4 source port, source IPv4 address and protocol based hashing
    config  node=s1  cmd=hash ipv4 l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC078: Keeping L4 source port, source IPv4 address and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC079: Verify L4 source port, source IPv4 address and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC080: Keeping L4 source port, source IPv4 address and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC081: Verify protocol, source IPv4 address and vlan based hashing
    config  node=s1  cmd=hash ipv4 protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.1.100.  ${port}
    \   ${vlan}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.101  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.101  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC082: Keeping protocol, source IPv4 address and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.1.101.  ${port}
    \   ${dst_port}=  Evaluate  3234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.1.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.1.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=UDP  src_port=${port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

#### L3 IPv4 Four Tuple hashing

TC083: Verify destination IPv4 address, source and destination L4 ports and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC084: Keeping destination IPv4 address, source and destination L4 ports and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.100.100.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC085: Verify source and destination IPv4 address and source and destination L4 port based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.10.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC086: Keeping source and destination IPv4 address and source and destination L4 ports constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=200.200.200.200  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=200.200.200.200  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC087: Verify destination IPv4 address, source and destination L4 port and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  3234 + ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.10.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.10.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC088: Keeping destination IPv4 address, source and destination L4 port and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.10.100.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC089: Verify source and destination IPv4 address, destination L4 port and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  100.10.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC090: Keeping source and destination IPv4 address, destination L4 port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.200  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=100.100.100.200  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC091: Verify destination IPv4 address, destination L4 port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=10.100.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=10.100.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC092: Keeping destination IPv4 address, destination L4 port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.100  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.100  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC093: Verify source and destination IPv4 address, destination L4 port and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC094: Keeping source and destination IPv4 address, destination L4 port and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC095: Verify source and destination IPv4 address, source L4 port and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC096: Keeping source and destination IPv4 address, source L4 port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${port}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC097: Verify destination IPv4 address, source L4 port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=10.100.100.1  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=10.100.100.1  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC098: Keeping destination IPv4 address, source L4 port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC099: Verify source and destination IPv4 address, source L4 port and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC100: Keeping source and destination IPv4 address, source L4 port and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC101: Verify source and destination IPv4 address, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC102: Keeping source and destination IPv4 address, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  ${port} * ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC103: Verify destination IPv4 address, L4 source port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC104: Keeping destination IPv4 address, L4 source port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${src_port}=  Evaluate  ${port} * ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC105: Verify source and destination IPv4 address, L4 source port and protocol based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC106: Keeping source and destination IPv4 address, L4 source port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC107: Verify source and destination L4 port, source IPv4 address and and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC108: Keeping source and destination L4 port, source IPv4 address and and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC109: Verify destination L4 port, protocol, source IPv4 address and and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC110: Keeping destination L4 port, protocol, source IPv4 address and and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-dst-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC111: Verify source L4 port, protocol, source IPv4 address and and vlan based hashing
    config  node=s1  cmd=hash ipv4 l4-src-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC112: Keeping source L4 port, protocol, source IPv4 address and and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 l4-src-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  
    
#### L3 IPv4 Five Tuple hashing
TC113: Verify source and destination IP, source and desitnation L4 port and protocol based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  1234 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC114: Keeping source and destination IP, source and desitnation L4 port and protocol constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol src-ip
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC115: Verify destination IP, source and desitnation L4 port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC116: Keeping destination IP, source and desitnation L4 port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  

TC117: Verify source and destination IP, source and desitnation L4 port, and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC118: Keeping source and destination IP, source and desitnation L4 port, and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  
    
TC119: Verify source and destination IP, desitnation L4 port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC120: Keeping source and destination IP, desitnation L4 port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  
    
TC121: Verify source and destination IP, source L4 port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=80  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic  
    
TC122: Keeping source and destination IP, source L4 port, protocol and vlan constant, increment all other fields and verify traffic goes on one link
    config  node=s1  cmd=hash ipv4 dst-ip l4-src-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${dst_port}=  Evaluate  10 + ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=100.100.100.100  src_gw=100.100.100.200  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=100.100.100.200  dst_gw=100.100.100.100  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=TCP  src_port=1234  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=100  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic  
    
#### L3 IPv4 Six Tuple hashing (Change all fields)
TC123: Verify source and destination IP, source and destination L4 port, protocol and vlan based hashing
    config  node=s1  cmd=hash ipv4 dst-ip l4-dst-port l4-src-port protocol src-ip vlan-id
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  ${port} + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic

### Misc Testcases

TC124: Verify with cli command "hash ipv4 disable" hashing on ipv4 is disabled and all traffic goes on one link
    config  node=s1  cmd=hash ipv4 disable
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  ${port} + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:00:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:00:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic for incorrect hash
    [Tags]  full  feature  traffic
    
TC125: Verify with cli command "hash ipv4 disable" hashing on ipv4 is disabled and L2 based hashing occurs
    config  node=s1  cmd=hash ipv4 disable
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    :FOR    ${port}  IN RANGE  3  35  2
    \   ${src_ip_value}=  Catenate  SEPARATOR=  10.100.100.  ${port}
    \   ${src_port}=  Evaluate  1234 + ${port}
    \   ${dst_ip_value}=  Catenate  SEPARATOR=  10.100.200.  ${port}
    \   ${dst_port}=  Evaluate  ${port} + ${port}
    \   ${vlan}=  Evaluate  ${port} * ${port}
    \   ${stream}=  L3 add  flow=a->b  frame_rate=${frame_rate}  frame_size=${frame_size}  frame_cnt=6250  no_arp=True
    \   ...     src_mac=${src_mac}   src_mac_step=00:00:01:00:00:00  dst_mac=${dst_mac}   dst_mac_step=00:00:01:00:00:00
    \   ...     src_ip=${src_ip_value}  src_gw=${dst_ip_value}  src_gw_step=0.0.0.0  src_cnt=1  src_gw_prefix=16
    \   ...     dst_ip=${dst_ip_value}  dst_gw=${src_ip_value}  dst_gw_step=0.0.0.0  dst_cnt=1  dst_gw_prefix=16
    \   ...     protocol=${port}  src_port=${src_port}  dst_port=${dst_port}  name=atob_l4_dst_port
    \   ...     vlan_id=${vlan}  ethertype=8100
    send and verify traffic
    [Tags]  full  feature  traffic
    
* Keywords 
rtag7 suite setup
    base suite setup
    rest enable feature  full-match
    config  node=s1  cmd=port-channel ${s1_1g_number_1} interface-list ${s1_1g_port_range_1} hash enhanced
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    config  node=s1  cmd=port-channel ${s1_1g_number_2} interface-list ${s1_1g_port_range_2} hash enhanced
    ${content1}=  cli_content  node=s1
    Should Not Contain  ${content1}  Error
    ${config3}=  rest add interface role  s1  ${filter_1}  filter  ${filter_nick_1}
    Should be True  ${config3}
    ${config4}=  rest add interface role  s1  ${delivery_1}  delivery  ${delivery_nick_1}
    Should be True  ${config4}
    ${config5}=  rest add interface role  s1  ${filter_2}  filter  ${filter_nick_2}
    Should be True  ${config5}
    ${config6}=  rest add interface role  s1  ${delivery_2}  delivery  ${delivery_nick_2}
    Should be True  ${config6}
    ${config7}=  rest add policy  admin-view  ${policy_name_1}  forward
    Should be True  ${config7}
    ${config8}=  rest add policy match  admin-view  ${policy_name_1}  1  {"any-traffic": true, "sequence": 1}
    Should be True  ${config8}
    ${config9}=  rest add policy interface  admin-view  ${policy_name_1}  ${filter_nick_1}  filter
    Should be True  ${config9}
    ${config10}=  rest add policy interface  admin-view  ${policy_name_1}  ${delivery_nick_1}  delivery
    Should be True  ${config10}
    ${config11}=  rest add policy  admin-view  ${policy_name_2}  forward
    Should be True  ${config11}
    ${config12}=  rest add policy match  admin-view  ${policy_name_2}  1  {"any-traffic": true, "sequence": 1}
    Should be True  ${config12}
    ${config13}=  rest add policy interface  admin-view  ${policy_name_2}  ${filter_nick_2}  filter
    Should be True  ${config13}
    ${config14}=  rest add policy interface  admin-view  ${policy_name_2}  ${delivery_nick_2}  delivery
    Should be True  ${config14}
    Sleep  10
    ${verify_policy1}=  rest verify bigtap policy  ${policy_name_1}  num_filter_intf=1  num_delivery_intf=1
    Should be true  ${verify_policy1}
    ${verify_policy2}=  rest verify bigtap policy  ${policy_name_2}  num_filter_intf=1  num_delivery_intf=1
    Should be true  ${verify_policy2}


rtag7 test setup
    ${result1}=  write version to file
    Should be true  ${result1}
    ${result2}=  start syslog monitor
    Should be true  ${result2}

verify portchannel interface is up  [Arguments]  ${switch}  ${interface_name}  
    ${inft_state}=  cli show interface state  ${switch}  ${interface_name}
    Should Contain  ${inft_state}  up

send and verify traffic
    clear stats  
    cli execute command  s1  clear interface statistics
    start traffic    
    sleep  10
    stop traffic
    sleep  2
    ${report}=  fetch port stats
    ${tx_value}=  verify dict key  ${report}  a  transmitted_frames
    ${rx_value}=  verify dict key  ${report}  b  received_valid_frames
    ${in_range_0}=  ixia verify traffic rate  ${tx_value}  ${rx_value}
    Should be true  ${in_range_0}
    ${in_range_1}=  ixia verify traffic rate  ${tx_value}  100000  50
    Should be true  ${in_range_1}
    ${in_range_2}=  ixia verify traffic rate  ${rx_value}  100000  50
    Should be true  ${in_range_2}
    ${member1_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet13  tx
    Should Not Be Equal As Integers  ${member1_s1}  0
    ${member2_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet15  tx
    Should Not Be Equal As Integers  ${member2_s1}  0
    ${member3_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet17  tx
    Should Not Be Equal As Integers  ${member3_s1}  0
    ${member4_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet19  tx
    Should Not Be Equal As Integers  ${member4_s1}  0
    ${member1_s2}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet14  rx
    Should Not Be Equal As Integers  ${member1_s2}  0
    ${member2_s2}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet16  rx
    Should Not Be Equal As Integers  ${member2_s2}  0
    ${member3_s2}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet18  rx
    Should Not Be Equal As Integers  ${member3_s2}  0
    ${member4_s2}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet20  rx
    Should Not Be Equal As Integers  ${member4_s2}  0
    ${range_1}=   Evaluate  ${member1_s1} - ${member1_s2}
    ${range_2}=   Evaluate  ${member2_s1} - ${member2_s2}
    ${range_3}=   Evaluate  ${member3_s1} - ${member3_s2}
    ${range_4}=   Evaluate  ${member4_s1} - ${member4_s2}
    ${result1}=  verify value is in range  ${range_1}  -10  10
    Should be true  ${result1}
    ${result2}=  verify value is in range  ${range_2}  -10  10
    Should be true  ${result2}
    ${result3}=  verify value is in range  ${range_3}  -10  10
    Should be true  ${result3}
    ${result4}=  verify value is in range  ${range_4}  -10  10
    Should be true  ${result4}
    ${mem1s1}=  Convert to Integer  ${member1_s1}
    ${mem2s1}=  Convert to Integer  ${member2_s1}
    ${mem3s1}=  Convert to Integer  ${member3_s1}
    ${mem4s1}=  Convert to Integer  ${member4_s1}
    ${percent_1}=   Evaluate  100*(operator.truediv(int(${mem1s1}),${frame_cnt}))  operator
    ${percent_2}=   Evaluate  100*(operator.truediv(int(${mem2s1}),${frame_cnt}))  operator
    ${percent_3}=   Evaluate  100*(operator.truediv(int(${mem3s1}),${frame_cnt}))  operator
    ${percent_4}=   Evaluate  100*(operator.truediv(int(${mem4s1}),${frame_cnt}))  operator
    ${result1}=  verify value is in range  ${percent_1}  10  40
    Should be true  ${result1}
    ${result2}=  verify value is in range  ${percent_2}  10  40
    Should be true  ${result2}
    ${result3}=  verify value is in range  ${percent_3}  10  40
    Should be true  ${result3}
    ${result4}=  verify value is in range  ${percent_4}  10  40
    Should be true  ${result4}


send and verify traffic for disabled interfaces
    clear stats  
    cli execute command  s1  clear interface statistics
    start traffic    
    sleep  10
    stop traffic
    sleep  2
    ${report}=  fetch port stats
    ${tx_value}=  verify dict key  ${report}  a  transmitted_frames
    ${rx_value}=  verify dict key  ${report}  b  received_valid_frames
    ${in_range_0}=  ixia verify traffic rate  ${tx_value}  ${rx_value}
    Should be true  ${in_range_0}
    ${in_range_1}=  ixia verify traffic rate  ${tx_value}  100000  50
    Should be true  ${in_range_1}
    ${in_range_2}=  ixia verify traffic rate  ${rx_value}  100000  50
    Should be true  ${in_range_2}
    ${member1_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet13  tx
    Should Not Be Equal As Integers  ${member1_s1}  0
    ${member2_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet15  tx
    Should Not Be Equal As Integers  ${member2_s1}  0
    ${member1_s2}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet14  rx
    Should Not Be Equal As Integers  ${member1_s2}  0
    ${member2_s2}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet16  rx
    Should Not Be Equal As Integers  ${member2_s2}  0
    ${range_1}=   Evaluate  ${member1_s1} - ${member1_s2}
    ${range_2}=   Evaluate  ${member2_s1} - ${member2_s2}
    ${result1}=  verify value is in range  ${range_1}  -10  10
    Should be true  ${result1}
    ${result2}=  verify value is in range  ${range_2}  -10  10
    Should be true  ${result2}
    ${mem1s1}=  Convert to Integer  ${member1_s1}
    ${mem2s1}=  Convert to Integer  ${member2_s1}
    ${percent_1}=   Evaluate  100*(operator.truediv(int(${mem1s1}),${frame_cnt}))  operator
    ${percent_2}=   Evaluate  100*(operator.truediv(int(${mem2s1}),${frame_cnt}))  operator
    ${result1}=  verify value is in range  ${percent_1}  40  60
    Should be true  ${result1}
    ${result2}=  verify value is in range  ${percent_2}  40  60
    Should be true  ${result2}



send and verify traffic for incorrect hash
    clear stats  
    cli execute command  s1  clear interface statistics
    start traffic    
    sleep  10
    stop traffic
    sleep  2
    ${report}=  fetch port stats
    ${tx_value}=  verify dict key  ${report}  a  transmitted_frames
    ${rx_value}=  verify dict key  ${report}  b  received_valid_frames
    ${in_range_0}=  ixia verify traffic rate  ${tx_value}  ${rx_value}
    Should be true  ${in_range_0}
    ${in_range_1}=  ixia verify traffic rate  ${tx_value}  100000  50
    Should be true  ${in_range_1}
    ${in_range_2}=  ixia verify traffic rate  ${rx_value}  100000  50
    Should be true  ${in_range_2}

    ${member1_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet13  tx
    ${range_mem1}=  ixia verify traffic rate  ${member1_s1}  100000  50
    ${member2_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet15  tx
    ${range_mem2}=  ixia verify traffic rate  ${member2_s1}  100000  50
    ${member3_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet17  tx
    ${range_mem3}=  ixia verify traffic rate  ${member3_s1}  100000  50
    ${member4_s1}=  cli return member interface stats  s1  ${s1_1g_number_1}  ethernet19  tx    
    ${range_mem4}=  ixia verify traffic rate  ${member4_s1}  100000  50
    ${member1_s4}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet14  rx
    ${range_mem5}=  ixia verify traffic rate  ${member1_s4}  100000  50
    ${member2_s4}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet16  rx
    ${range_mem6}=  ixia verify traffic rate  ${member2_s4}  100000  50
    ${member3_s4}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet18  rx
    ${range_mem7}=  ixia verify traffic rate  ${member3_s4}  100000  50
    ${member4_s4}=  cli return member interface stats  s1  ${s1_1g_number_2}  ethernet20  rx
    ${range_mem8}=  ixia verify traffic rate  ${member4_s4}  100000  50
    ${testPass}=  Set Variable If  
    ...   '${range_mem1}' == 'True'  1
    ...   '${range_mem2}' == 'True'  2
    ...   '${range_mem3}' == 'True'  3
    ...   '${range_mem4}' == 'True'  4
    Should Not Be Empty  ${testPass}


rtag7 test teardown
    delete traffic
    bash execute command    s1   ofad-ctl phy spe SWITCH_PORT_ACTION_ADMIN_ENABLE ${s1_lag_mem_1_3}
    bash execute command    s1   ofad-ctl phy spe SWITCH_PORT_ACTION_ADMIN_ENABLE ${s1_lag_mem_1_4}
    sleep  5
    ${result1}=  stop syslog monitor
    Should be true  ${result1}
    
rtag7 suite teardown
    rest delete policy  admin-view  ${policy_name_1}
    rest delete policy  admin-view  ${policy_name_2}
    rest delete interface role  s1  ${filter_1}  filter  ${filter_nick_1} 
    rest delete interface role  s1  ${filter_2}  filter  ${filter_nick_2} 
    rest delete interface role  s1  ${delivery_1}  delivery  ${delivery_nick_1}
    rest delete interface role  s1  ${delivery_2}  delivery  ${delivery_nick_2}
    rest delete interface  s1  ${filter_1}
    rest delete interface  s1  ${filter_2}
    rest delete interface  s1  ${delivery_1}
    rest delete interface  s1  ${delivery_2}
    cli delete portchannel  s1  ${s1_1g_number_1}
    cli delete portchannel  s1  ${s1_1g_number_2}
    rest delete switch  s1
    base suite teardown