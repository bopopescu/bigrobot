*Settings
Documentation  SNMP Sanity Test	Suite
Suite Setup  snmp setup
Suite Teardown   snmp suite teardown
Test Setup   base test setup
Test Teardown   base test teardown
Force Tags   SNMP Sanity
Library   keywords/BsnCommon.py
Library   keywords_dev/BsnCommonConfig.py
Library  keywords_dev/BsnCommonShow.py
Library  keywords_dev/BsnSwitchCommon.py

* Variable
${ip_address_1}  10.192.75.7
${ip_address_2}  10.192.75.213
${switchlight_version}  SwitchLight 2.0.0-beta1


*Test Case
Configure and Verify Configuration via CLI on LB9 and LY2  
	verify config    
	
Verify SNMP OID sysContact on LB9 and LY2  
	verify sysContact   

Verify SNMP OID sysLocation on LB9 and LY2  
	verify sysLocation

Verify SNMP OID sysDescr on LB9 and LY2  
	verify sysDescr
	
Verify SNMP OID ifDescr of ma1 on LB9 and LY2  
	verify ifDescr 
	
Verify SNMP OID ifType of ma1 on LB9 and LY2  
	verify ifType
	
Verify SNMP OID ifAdminStatus of ma1 on LB9 and LY2  
	verify ifAdminStatus
	
Verify SNMP OID ifOperStatus of ma1 on LB9 and LY2  
	verify ifOperStatus
	
Verify SNMP OID ifSpeed of ma1 on LB9 and LY2  
	verify ifSpeed
	
Verify SNMP OID ifMtu of ma1 on LB9 and LY2  
	verify ifSpeed
	
Verify SNMP OID ifDescr of 1Gig Data Port (LB9) 
	verify ifDescr lb9
	
Verify SNMP OID ifType of 1Gig Data Port (LB9) 
	verify ifType lb9
	
Verify SNMP OID ifAdminStatus of 1Gig Data Port (LB9) 
	verify ifAdminStatus lb9
	
Verify SNMP OID ifOperStatus of 1Gig Data Port (LB9) 
	verify ifOperStatus lb9
	
Verify SNMP OID ifSpeed of 1Gig Data Port (LB9) 
	verify ifSpeed lb9
	
Verify SNMP OID ifHighSpeed of 1Gig Data Port (LB9) 
	verify ifHighSpeed lb9
	
Verify SNMP OID ifDescr of 10Gig Data Port (LB9) 
	verify ifDescr tenGlb9
	
Verify SNMP OID ifType of 10Gig Data Port (LB9) 
	verify ifType tenGlb9
	
Verify SNMP OID ifAdminStatus of 10Gig Data Port (LB9) 
	verify ifAdminStatus tenGlb9
	
Verify SNMP OID ifOperStatus of 10Gig Data Port (LB9) 
	verify ifOperStatus tenGlb9
	
Verify SNMP OID ifSpeed of 10Gig Data Port (LB9) 
	verify ifSpeed tenGlb9
	
Verify SNMP OID ifHighSpeed of 10Gig Data Port (LB9) 
	verify ifHighSpeed tenGlb9
	
Verify SNMP OID ifDescr of 10Gig Data Port (LY2) 
	verify ifDescr ly2
	
Verify SNMP OID ifType of 10Gig Data Port (LY2) 
	verify ifType ly2
	
Verify SNMP OID ifAdminStatus of 10Gig Data Port (LY2) 
	verify ifAdminStatus ly2
	
Verify SNMP OID ifOperStatus of 10Gig Data Port (LY2) 
	verify ifOperStatus ly2
	
Verify SNMP OID ifSpeed of 10Gig Data Port (LY2) 
	verify ifSpeed ly2
	
Verify SNMP OID ifHighSpeed of 10Gig Data Port (LY2) 
	verify ifHighSpeed ly2
	
Verify SNMP OID ifDescr of 40Gig Data Port (LY2) 
	verify ifDescr fortyGly2
	
Verify SNMP OID ifType of 40Gig Data Port (LY2) 
	verify ifType fortyGly2
	
Verify SNMP OID ifAdminStatus of 40Gig Data Port (LY2) 
	verify ifAdminStatus fortyGly2
	
Verify SNMP OID ifOperStatus of 40Gig Data Port (LY2) 
	verify ifOperStatus fortyGly2
	
Verify SNMP OID ifSpeed of 40Gig Data Port (LY2) 
	verify ifSpeed fortyGly2
	
Verify SNMP OID ifHighSpeed of 40Gig Data Port (LY2) 
	verify ifHighSpeed fortyGly2
	
Verify SNMP OID ifDescr of PortChannel across 10Gig Data Port (LB9) 
	verify lag-ifDescr tenGlb9

Verify SNMP OID ifType of PortChannel across 10Gig Data Port (LB9) 
	verify lag-ifType tenGlb9
	
Verify SNMP OID ifAdminStatus of PortChannel across 10Gig Data Port (LB9) 
	verify lag-ifAdminStatus tenGlb9
	
Verify SNMP OID ifOperStatus of PortChannel across 10Gig Data Port (LB9) 
	verify lag-ifOperStatus tenGlb9
	
Verify SNMP OID ifSpeed of PortChannel across 10Gig Data Port (LB9) 
	verify lag-ifSpeed tenGlb9
	
Verify SNMP OID ifHighSpeed of PortChannel across 10Gig Data Port (LB9) 
	verify lag-ifHighSpeed tenGlb9
	
Verify SNMP OID ifDescr of PortChannel across 40Gig Data Port (LY2) 
	verify lag-ifDescr fortyGly2

Verify SNMP OID ifType of PortChannel across 40Gig Data Port (LY2) 
	verify lag-ifType fortyGly2

Verify SNMP OID ifAdminStatus of PortChannel across 40Gig Data Port (LY2) 
	verify lag-ifAdminStatus fortyGly2

Verify SNMP OID ifOperStatus of PortChannel across 40Gig Data Port (LY2) 
	verify lag-ifOperStatus fortyGly2

Verify SNMP OID ifSpeed of PortChannel across 40Gig Data Port (LY2) 
	verify lag-ifSpeed fortyGly2

Verify SNMP OID ifHighSpeed of PortChannel across 40Gig Data Port (LY2) 
	verify lag-ifHighSpeed fortyGly2
	
Verify snmpgetnext works as expected 
	verify snmpgetnext
	
Verify snmpbulkget works as expected 
	verify snmpbulkget
	
Verify snmpbulkwalk works as expected 
	verify snmpbulkwalk
	
Modify SNMP Community and Verify SNMP OID sysContact 
	modify community
	
Verify no snmp-server disables snmp 
	disable snmp
	
Restart process SNMPD and verify SNMP Stats 
	restart snmpd

	[Tags]   sanity


* Keywords  
snmp setup            
	configure snmp keyword   ${ip_address_1}   community   ro public       
	configure snmp keyword   ${ip_address_1}   location   CS_RACK11_6020       
	configure snmp keyword   ${ip_address_1}   contact   nw_admin@super_awesome_company.com       
	configure snmp host   ${ip_address_1}   10.192.66.230   traps   public   161   
	configure snmp host   ${ip_address_1}   10.192.66.230   informs   public   161
	configure portchannel  ${ip_address_1}  1  49-50  L3  
	enable snmp   ${ip_address_1}                
	configure snmp keyword   ${ip_address_2}   community   ro public       
	configure snmp keyword   ${ip_address_2}   location   CS_RACK11_6015       
	configure snmp keyword   ${ip_address_2}   contact   nw_admin@super_awesome_company.com       
	configure snmp host   ${ip_address_2}   10.192.66.230   traps   public   161   
	configure snmp host   ${ip_address_2}   10.192.66.230   informs   public   161  
	configure portchannel  ${ip_address_2}  7  43,44  L3   
	configure portchannel  ${ip_address_2}  30  49,52  L3 
	enable snmp   ${ip_address_2}             
	sleepnow   30             

verify config               
	${snmp_output}=  snmp show   ${ip_address_1}        
	Should Contain   ${snmp_output}   CS_RACK11_6020        
	Should Contain   ${snmp_output}   nw_admin@super_awesome_company.com        
	Should Contain   ${snmp_output}   public        
	Should Contain   ${snmp_output}   enabled  
	verify_portchannel  ${ip_address_1}  1       
	${snmp_output}=  snmp show	${ip_address_2}        
	Should Contain   ${snmp_output}   CS_RACK11_6015        
	Should Contain   ${snmp_output}   nw_admin@super_awesome_company.com        
	Should Contain   ${snmp_output}   public        
	Should Contain   ${snmp_output}   enabled  
	verify_portchannel  ${ip_address_2}  7 
	verify_portchannel  ${ip_address_2}  30       

verify sysContact               
	${snmp_key} =     snmp cmd   ${ip_address_1}   snmpget    public   sysContact.0  
	Should Contain   ${snmp_key}   nw_admin@super_awesome_company.com      
	${snmp_key1} =     snmp cmd   ${ip_address_2}   snmpget    public   sysContact.0  
	Should Contain   ${snmp_key1}   nw_admin@super_awesome_company.com

verify sysLocation
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget  public  sysLocation.0
	Should Contain  ${snmp_key}  CS_RACK11_6020
	${snmp_key2}=  snmp cmd  ${ip_address_2}  snmpget   public  sysLocation.0
	Should Contain  ${snmp_key2}  CS_RACK11_6015

verify sysDescr
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpget    public  sysDescr.0
	Should Contain  ${snmp_key}  ${switchlight_version}
	${snmp_key2} =  snmp cmd  ${ip_address_2}  snmpget    public  sysDescr.0
	Should Contain  ${snmp_key2}  ${switchlight_version}

verify ifDescr
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpget   public  ifDescr.3
	Should Contain  ${snmp_key}  ma1
	${snmp_key2} =  snmp cmd  ${ip_address_2}  snmpget   public  ifDescr.3
	Should Contain  ${snmp_key2}  ma1

verify ifType
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpget   public  ifType.3
	Should Contain  ${snmp_key}  ethernetCsmacd
	${snmp_key2} =  snmp cmd  ${ip_address_2}  snmpget   public  ifType.3
	Should Contain  ${snmp_key2}  ethernetCsmacd

verify ifAdminStatus
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpget      public  ifAdminStatus.3
	Should Contain  ${snmp_key}  up
	${snmp_key2} =  snmp cmd  ${ip_address_2}  snmpget      public  ifAdminStatus.3
	Should Contain  ${snmp_key2}  up

verify ifOperStatus
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpget    public  ifOperStatus.3
	Should Contain  ${snmp_key}  up
	${snmp_key2} =  snmp cmd  ${ip_address_2}  snmpget    public  ifOperStatus.3
	Should Contain  ${snmp_key2}  up

verify ifSpeed
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget  public  ifSpeed.3
	Should Contain  ${snmp_key}  1000000000
	${snmp_key2}=  snmp cmd  ${ip_address_2}  snmpget  public  ifSpeed.3
	Should Contain  ${snmp_key2}  1000000000

verify IfMtu
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget    public  ifMtu.3
	Should Contain  ${snmp_key}  1500
	${snmp_key2}=  snmp cmd  ${ip_address_2}  snmpget    public  ifMtu.3
	Should Contain  ${snmp_key2}  1500
	sleepnow  5

verify ifDescr lb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk  public  ifDescr.1048
	Should Contain  ${snmp_key}  ethernet48

verify ifType lb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifType.1048
	Should Contain  ${snmp_key}  ethernetCsmacd

verify ifAdminStatus lb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifAdminStatus.1048
	Should Contain  ${snmp_key}  up

verify ifOperStatus lb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifOperStatus.1048
	Should Contain  ${snmp_key}  up

verify ifSpeed lb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifSpeed.1048
	Should Contain  ${snmp_key}  1000000000
	sleepnow  5
	
verify ifHighSpeed lb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifHighSpeed.1048
	Should Contain  ${snmp_key}  1000

verify ifDescr tenGlb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifDescr.1050
	Should Contain  ${snmp_key}  ethernet50

verify ifType tenGlb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifType.1050
	Should Contain  ${snmp_key}  ethernetCsmacd

verify ifAdminStatus tenGlb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifAdminStatus.1050
	Should Contain  ${snmp_key}  up

verify ifOperStatus tenGlb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifOperStatus.1050
	Should Contain  ${snmp_key}  up

verify ifSpeed tenGlb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifSpeed.1050
	Should Contain  ${snmp_key}  4294967295
	sleepnow  5
	
verify ifHighSpeed tenGlb9
	${snmp_key} =  snmp cmd  ${ip_address_1}  snmpwalk  public  ifHighSpeed.1050
	Should Contain  ${snmp_key}  10000
	sleepnow  5

verify ifDescr ly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk   public  ifDescr.1048
	Should Contain  ${snmp_key}  ethernet48

verify ifType ly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk   public  ifType.1048
	Should Contain  ${snmp_key}  ethernetCsmacd

verify ifAdminStatus ly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk  public  ifAdminStatus.1048
	Should Contain  ${snmp_key}  up

verify ifOperStatus ly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifOperStatus.1048
	Should Contain  ${snmp_key}  up
	sleepnow  5

verify ifSpeed ly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifSpeed.1048
	Should Contain  ${snmp_key}  4294967295

verify ifHighSpeed ly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifHighSpeed.1048
	Should Contain  ${snmp_key}  10000

verify ifDescr fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk   public  ifDescr.1052
	Should Contain  ${snmp_key}  ethernet52

verify ifType fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk   public  ifType.1052
	Should Contain  ${snmp_key}  ethernetCsmacd

verify ifAdminStatus fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk      public  ifAdminStatus.1052
	Should Contain  ${snmp_key}  up

verify ifOperStatus fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifOperStatus.1052
	Should Contain  ${snmp_key}  up

verify ifSpeed fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifSpeed.1052
	Should Contain  ${snmp_key}  4294967295

verify ifHighSpeed fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifHighSpeed.1052
	Should Contain  ${snmp_key}  40000
	sleepnow  5

verify lag-ifDescr tenGlb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk   public  ifDescr.1061
	Should Contain  ${snmp_key}  port-channel1
	
verify lag-ifType tenGlb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk   public  ifType.1061
	Should Contain  ${snmp_key}  ethernetCsmacd

verify lag-ifAdminStatus tenGlb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk      public  ifAdminStatus.1061
	Should Contain  ${snmp_key}  up

verify lag-ifOperStatus tenGlb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk    public  ifOperStatus.1061
	Should Contain  ${snmp_key}  up

verify lag-ifSpeed tenGlb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk    public  ifSpeed.1061
	Should Contain  ${snmp_key}  4294967295

verify lag-ifHighSpeed tenGlb9
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpwalk    public  ifHighSpeed.1061
	Should Contain  ${snmp_key}  20000
	
verify lag-ifDescr fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk   public  ifDescr.1090
	Should Contain  ${snmp_key}  port-channel30
	
verify lag-ifType fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk   public  ifType.1090
	Should Contain  ${snmp_key}  ethernetCsmacd

verify lag-ifAdminStatus fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk      public  ifAdminStatus.1090
	Should Contain  ${snmp_key}  up

verify lag-ifOperStatus fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifOperStatus.1090
	Should Contain  ${snmp_key}  up

verify lag-ifSpeed fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifSpeed.1090
	Should Contain  ${snmp_key}  4294967295

verify lag-ifHighSpeed fortyGly2
	${snmp_key}=  snmp cmd  ${ip_address_2}  snmpwalk    public  ifHighSpeed.1090
	Should Contain  ${snmp_key}  80000
	
verify snmpgetnext
	${snmp_key} =   snmp cmd  ${ip_address_1}  snmpgetnext  public  ifDescr.2
	Should Contain  ${snmp_key}  ma1

verify snmpbulkget
	${snmp_key}=  snmp cmd opt   ${ip_address_1}  snmpbulkget  -Cr1  public  ifDescr.2
	Should Contain  ${snmp_key}  ma1

verify snmpbulkwalk
	${snmp_key}=  snmp cmd opt   ${ip_address_1}  snmpbulkwalk  -Cr2  public  ifDescr.3
	Should Contain  ${snmp_key}  ma1

modify community
	delete snmp keyword  ${ip_address_1}  community  ro public
	configure snmp keyword  ${ip_address_1}  community  ro bigswitch
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget   bigswitch  sysContact.0
	Should Contain  ${snmp_key}  nw_admin@super_awesome_company.com
	delete snmp keyword  ${ip_address_1}  community  ro bigswitch
	configure snmp keyword  ${ip_address_1}  community  ro public

disable snmp
	disable switch snmp  ${ip_address_1}
	sleepnow  5
	${snmp_output} =   snmp show  ${ip_address_1}
	Should Contain  ${snmp_output}  disabled
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget   public  sysContact.0
	Should Be Empty  ${snmp_key}  
	enable snmp  ${ip_address_1}
	sleepnow  5
	${snmp_output} =   snmp show  ${ip_address_1}
	Should Contain  ${snmp_output}  enabled
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget   public  sysContact.0
	Should Contain  ${snmp_key}  nw_admin@super_awesome_company.com

restart snmpd
	restart process  ${ip_address_1}   snmpd
	${snmp_output}=  snmp show  ${ip_address_1}
	Should Contain  ${snmp_output}  CS_RACK11_6020
	Should Contain  ${snmp_output}  nw_admin@super_awesome_company.com
	Should Contain  ${snmp_output}  public
	${snmp_key}=  snmp cmd  ${ip_address_1}  snmpget  public  sysContact.0
	Should Contain  ${snmp_key}  nw_admin@super_awesome_company.com

snmp suite teardown  
	disable switch snmp   ${ip_address_1}            
	delete snmp keyword   ${ip_address_1}   community   ro public       
	delete snmp keyword   ${ip_address_1}   location   CS_RACK11_6020       
	delete snmp keyword   ${ip_address_1}   contact   nw_admin@super_awesome_company.com       
	delete snmp host   ${ip_address_1}   10.192.66.230   traps   public   161   
	delete snmp host   ${ip_address_1}   10.192.66.230   informs   public   161       
	disable switch snmp   ${ip_address_2}         
	delete snmp keyword   ${ip_address_2}   community   ro public       
	delete snmp keyword   ${ip_address_2}   location   CS_RACK11_6015       
	delete snmp keyword   ${ip_address_2}   contact   nw_admin@super_awesome_company.com       
	delete snmp host   ${ip_address_2}   10.192.66.230   traps   public   161   
	delete snmp host   ${ip_address_2}   10.192.66.230   informs   public   161   
            

