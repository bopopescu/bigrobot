*Settings
Documentation               BigTap Dell S6000 Environment Test Suite
Suite Setup                 environment suite setup
Suite Teardown              base suite teardown
Test Setup                  environment test setup
Test Teardown               environment test teardown 
Force Tags                  corsair-450 switch snmp 
Library                     keywords/BsnCommon.py
Library                     keywords/AppController.py
Library                     keywords/BigTap.py
Library                     keywords/SwitchLight.py
Library                     keywords/Ixia.py
Library                     Collections.py
Library                     OperatingSystem.py
Library                     String.py

* Variable
${snmp_ccommunity_1}        ro public
${snmp_ccommunity_2}        ro bsn 
${snmp_ccommunity_3}        rw private 
${snmp_community_1}         public
${snmp_contact_1}           bigdog@bigswitch.com
${snmp_location_1}          Santa Clara



* Test Case
TC1: Verify switch SN is reported correctly in SNMP Get Output read only community
    ${switch_dict}=  cli show version  s1  
    ${cli_value}=  Convert To String  ${switch_dict['SerialNumber']}
    ${snmp_value}=  snmp cmd   s1   snmpget    public   .1.3.6.1.4.1.37538.2.1000.1.1.3
    Should Contain  ${snmp_value}  ${cli_value}
    [Tags]            

TC2: Verify switch SN is reported correctly in SNMP Walk Output read only community
    ${switch_dict}=  cli show version  s1
    ${cli_value}=  Convert To String  ${switch_dict['SerialNumber']}
    ${snmp_value}=  snmp cmd   s1   snmpwalk   public   .1.3.6.1.4.1.37538.2.1000.1.1.3
    Should Contain  ${snmp_value}  ${cli_value}
    [Tags]  

TC3: Verify switch SN is reported correctly in SNMP Get Output read/write community
    ${switch_dict}=  cli show version  s1
    ${cli_value}=  Convert To String  ${switch_dict['SerialNumber']}
    ${snmp_value}=  snmp cmd   s1   snmpget   private   .1.3.6.1.4.1.37538.2.1000.1.1.3
    Should Contain  ${snmp_value}  ${cli_value}
    [Tags]

TC4: Verify switch SN is reported correctly in SNMP Get Output read only community change
    cli delete snmp keyword   s1   community   ${snmp_ccommunity_1}
    cli add snmp keyword   s1   community   ${snmp_ccommunity_2}
    ${switch_dict}=  cli show version  s1
    ${cli_value}=  Convert To String  ${switch_dict['SerialNumber']}
    ${snmp_value}=  snmp cmd   s1   snmpget   bsn   .1.3.6.1.4.1.37538.2.1000.1.1.3
    Should Contain  ${snmp_value}  ${cli_value}
    [Tags]  

TC5: Verify switch SN is reported correctly in SNMP Get Output read only community reboot
    cli execute command  s1  copy running-config startup-config
    cli restart switch  s1
    Sleep   90
    ${switch_dict}=  cli show version  s1
    ${cli_value}=  Convert To String  ${switch_dict['SerialNumber']}
    ${snmp_value}=  snmp cmd   s1   snmpget    bsn   .1.3.6.1.4.1.37538.2.1000.1.1.3
    Should Contain  ${snmp_value}  ${cli_value}
    [Tags]  reboot  


    
                   
*Keywords

environment suite setup
    base suite setup        
    cli add snmp keyword   s1   community   ${snmp_ccommunity_1}       
    cli add snmp keyword   s1   community   ${snmp_ccommunity_3}
    cli add snmp keyword   s1   location    ${snmp_location_1}       
    cli add snmp keyword   s1   contact     ${snmp_contact_1}       
    cli enable snmp   s1              
    Sleep   30
    
environment test setup
    write version to file
    start syslog monitor
    
environment test teardown
    stop syslog monitor   
