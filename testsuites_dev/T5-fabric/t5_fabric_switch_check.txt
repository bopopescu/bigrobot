== T5 Fabric Switch Test ==


* Setting 

Documentation   T5 Fabric Switch Add/Delete Test
Suite Setup     base suite setup
Suite Teardown  base suite teardown
Test Setup      base test setup
Test Teardown   base test teardown
Force Tags      T5 Sanity
Library         keywords/BsnCommon.py
Library         keywords_dev/T5.py
Library         keywords_dev/T5Fabric.py
Library         keywords_dev/Mininet.py

 
* Variables

* Test Case   

Add Fabric Switch Spine and Verify the Status 

  REST show fabric switch     
  # Check the fabric switch connection status once the physical switch is connected
  verify fabric switch  00:00:00:00:00:01:00:01  
  # status should show as virtual   
  configure switch  spine0 
  configure dpid  spine0  00:00:00:00:00:01:00:01 
  configure fabric role  spine0  spine
  verify fabric switch  00:00:00:00:00:01:00:01 
  
Add Fabric Switch Leaf Group and Verify the status

  verify fabric switch  00:00:00:00:00:02:00:01    
  configure switch  leaf0-a
  configure dpid  leaf0-a  00:00:00:00:00:02:00:01 
  configure fabric role  leaf0-a  leaf
  configure leaf group  leaf0-a  rack0
  verify fabric switch  00:00:00:00:00:02:00:01
  configure switch  leaf0-b
  configure dpid  leaf0-b  00:00:00:00:00:02:00:02 
  configure fabric role  leaf0-b  leaf
  configure leaf group  leaf0-b  rack0
  verify fabric switch  00:00:00:00:00:02:00:02 
 
Delete Fabric switch and verify the status

  REST remove fabric switch  spine0
  verify fabric switch  00:00:00:00:00:01:00:01
  verify fabric switch  00:00:00:00:00:02:00:01
  verify fabric switch  00:00:00:00:00:02:00:02
  REST remove fabric switch  leaf0-a
  REST remove fabric switch  leaf0-b

* Keywords   

verify fabric switch  [Arguments]  ${dpid} 
  REST verify fabric switch  ${dpid} 

configure switch  [Arguments]  ${switch}
  REST configure switch  ${switch}

configure dpid  [Arguments]  ${switch}  ${dpid}
  REST configure dpid  ${switch}  ${dpid}

configure fabric role  [Arguments]  ${switch}  ${role}
  REST configure fabric role  ${switch}  ${role}

configure leaf group  [Arguments]  ${switch}  ${group}
  REST configure leaf group  ${switch}  ${group}


