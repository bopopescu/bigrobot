* Settings
Documentation    T5 Test Suite
Suite Setup      base suite setup
Suite Teardown   base suite teardown
Test Setup       base test setup
Test Teardown    base test teardown
Force Tags       T5 
Library          keywords/BsnCommon.py
Library          keywords/Controller.py
Library			 keywords/Mininet.py
Library		     keywords/Host.py
Library		     keywords/Ixia.py
Library		     keywords_dev/mingtao/T5_longevity.py
Library	         keywords/T5.py
Library	         keywords/T5Platform.py
Library	         keywords/Controller.py
 
Resource	     testsuites_dev/mingtao/T5_mingtao_resource.txt 

* Variable
${leaf0a_ixia_intf}   leaf0-eth5 
${short}  1
${medium}  10
${long}   30
${verylong}    180 






* Test Case

T1.1 first boot of controller in HA mode via static IP after boot factory default
	log   VIP-running_config-factory default-vip-running_config
#	Verify VIP function 	 10.192.105.50   	
#	Cli Copy  running-config   scp://bsn@qa-kvm-32:/home/mingtao/config_try    scp_passwd=bsn
 	${A}=   cli_take_snapshot   master  run_config=yes	
	
 
#	cli_boot_factory_default	c1
#	sleep  ${verylong}	
#  	controller first boot static        c1  no  no   10.192.105.20   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C20
#	cli_boot_factory_default	c2
#	sleep  ${verylong}	
#   controller first boot static 2nd    c2  yes  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30     10.192.105.20
#	Cli Copy   scp://bsn@qa-kvm-32:/home/mingtao/config_try  running-config  scp_passwd=bsn
	${B}=   cli_take_snapshot   master   run_config=yes		
  	Should Be Equal    ${A}    ${B}	 	
#	Verify VIP function 	 10.192.105.51  
   	
   	
	[Tags] 	sanity    firstboot

Verify the VIP change after the first boot
     Log   covered in first boot T1.1
	[Tags] 	sanity      firstboot


Factory default options
    Log   covered in first boot T1.1
     
	[Tags] 	sanity   firstboot

Verify config after the first boot
     Log   covered in first boot T1.1
	[Tags] 	sanity      firstboot


Test controller reboot
 	reboot node and verify it role
 
	[Tags] 	sanity    infra

Verification of CLI commands (whoami , ping , set length , history , reauth)
	log   cli with admin and non admin	 
	Test whoami ping reauth with admin
	Test whoami ping reauth with non admin  
    log  manual pass for: set length,history
	
	[Tags] 	sanity    cli

Traceroute
	Log  traceroute in bash
    Manual passed
	[Tags] 	sanity  infra  Manual    

Watch debug command output
    Log  watch debug/delete is not useful
    Manual failed
	[Tags] 	sanity   cli  Manual   

	 
first boot of controller in standalone mode via static IP after boot factory default
 	
	cli_boot_factory_default	c1
	sleep  180	
  	controller first boot static    c1  no  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30
	[Tags] 	sanity    firstboot   

Test first boot of controller menu node for standalone
	cli_boot_factory_default	c2
	sleep  180	
  	first_boot_controller_initial_node_setup   c2  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30 
	first_boot_controller_initial_cluster_setup 	c2   no   
	first_boot_controller_menu_recovery   c2    adminadmin
	first_boot_controller_menu_IP         c2    10.192.105.30  18   
	first_boot_controller_menu_gateway    c2   10.192.64.1
	first_boot_controller_menu_dnsserver  c2   10.192.3.1
	first_boot_controller_menu_domain	  c2   bigswitch.com
	first_boot_controller_menu_name       c2   C30
	first_boot_controller_menu_apply      c2
 
	[Tags] 	sanity     firstboot

 
 Verify with invalid DNS server IP address
 	cli_boot_factory_default	c2
	sleep  180	
  	first_boot_controller_initial_node_setup   c2  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30 
	first_boot_controller_initial_cluster_setup 	c2   no   
	first_boot_controller_menu_dnsserver  c2   300.0.0.1   invalid_input=True
	first_boot_controller_menu_dnsserver  c2   100.0.0.1.0   invalid_input=True
	Log   broadcast as dns server address
#	first_boot_controller_menu_dnsserver  c2   255.255.255.255   invalid_input=True	
#	first_boot_controller_menu_dnsserver  c2   224.0.0.0   invalid_input=True	
	first_boot_controller_menu_dnsserver  c2   2f.3f.0.0   invalid_input=True	
	first_boot_controller_menu_dnsserver  c2   0.0.0.0     invalid_input=True		
	first_boot_controller_menu_dnsserver  c2   10.192.3.1    
	first_boot_controller_menu_apply      c2	
    
	[Tags] 	sanity     firstboot   JIRA-BSC-5031   
 
 
 Verify with invalid mask
 	cli_boot_factory_default	c2
	sleep  180	
  	first_boot_controller_initial_node_setup   c2  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30 
	first_boot_controller_initial_cluster_setup 	c2   no   
	first_boot_controller_menu_prefix   c2   35   invalid_input=True
	first_boot_controller_menu_prefix   c2   32   invalid_input=True
	first_boot_controller_menu_prefix   c2   31   invalid_input=True				
	log    0 is accepted as valid mask
#	first_boot_controller_menu_prefix   c2   0   invalid_input=True	
	first_boot_controller_menu_prefix   c2   18   
 	first_boot_controller_menu_apply      c2	
    
	[Tags] 	sanity   firstboot     JIRA-BSC-5032    
 
  
Verify with invalid IP
 	cli_boot_factory_default	c2
	sleep  180	
  	first_boot_controller_initial_node_setup   c2  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30 
	first_boot_controller_initial_cluster_setup 	c2   no   
	first_boot_controller_menu_IP   c2   300.0.0.0    18   invalid_input=True
    log   broadcast address   
#	first_boot_controller_menu_IP   c2   255.255.255.255    18   invalid_input=True	
#	first_boot_controller_menu_IP   c2   224.0.0.0    18   invalid_input=True
	first_boot_controller_menu_IP   c2   0.0.0.0      18   invalid_input=True	
	first_boot_controller_menu_IP   c2   100.100.100.100.100      18   invalid_input=True	
	first_boot_controller_menu_IP   c2   1f.2f.3f.0      18   invalid_input=True		
	
	first_boot_controller_menu_IP   c2   10.192.105.30/18   
			 
	first_boot_controller_menu_apply      c2	
    
	[Tags] 	sanity   firstboot       JIRA-BSC-5031    
 
Verify the behavior if user hits Ctrl+C during various stages of the first boot process
	cli_boot_factory_default	c2
	sleep  180	
  	first_boot_controller_initial_node_setup   c2  no   10.192.105.30   18   10.192.64.1   10.192.3.1   bigswitch.com   MY-T5-C30 
	first_boot_controller_ctl_c                c2
	first_boot_controller_initial_cluster_setup 	c2   no   
	first_boot_controller_ctl_c                c2
 	first_boot_controller_menu_apply      c2    	    
	[Tags] 	sanity    Manual   untested   firstboot

  
 
Verify first boot of controller in  standlaone (DHCP)  
    log  single node dhcp
#	first_boot_controller   c1   no   yes      
	[Tags] 	sanity     firstboot

 
Verify first boot of controller in HA mode ( DHCP)
     log  dhcp for multiple node
  	[Tags] 	sanity     firstboot



#########  
 

Verification of configs in local node mode 
	log   not able to show the config
    Manual failed
	[Tags] 	sanity    Manual   firstboot

Verify first boot of controller when external DNS/NTP server is unreachable
    Manual untested
	[Tags] 	sanity    Manual   untested   firstboot

Verify first boot of controller when Master and Slave are in different time zones
    Manual untested
	[Tags] 	sanity    Manual   untested   firstboot

Verify first boot of slave controller when Master controller is rebooting
    Manual untested
	[Tags] 	sanity    Manual   untested   firstboot

Verify first boot of controller on bare metal server
    Manual untested
	[Tags] 	sanity    Manual   untested    firstboot


Shutdown the controller 
    Manual untested
	[Tags] 	sanity    Manual   untested  infra


Verification of tech-support and related commands  
    Manual untested
	[Tags] 	sanity    Manual   untested  infra


Change IP Tables/ Firewalls
    Manual untested
	[Tags] 	sanity    Manual   untested

Verify controller IP change after the first boot
    Manual untested
	[Tags] 	sanity    Manual   untested    firstboot

 
First boot process in a appliance
    Manual untested
	[Tags] 	sanity    Manual   untested   firstboot

Controller installation with minimum/maximum supported cpu/memory configuration
    Manual untested
	[Tags] 	sanity    Manual   untested   firstboot

 
 
	
