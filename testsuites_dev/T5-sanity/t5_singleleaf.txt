== T5 Sanity Test Suite ==

* Setting
Documentation    T5 Single Leaf Dual Rack Test Suite
Suite Setup      base suite setup
Suite Teardown   base suite teardown
Test Setup       base test setup
Test Teardown    base test teardown
Force Tags       T5 Sanity
Library          keywords/BsnCommon.py
Library          keywords_dev/T5.py
Library	         keywords_dev/T5Fabric.py
Library          keywords_dev/Mininet.py

* Variables
${bm0_ip}  10.0.0.1
${bm1_ip}  10.0.0.2
${bm2_ip}  10.0.0.3

* Test Case 

ping bm0 to bm1 single leaf dynamic endpoints
   create a tenant  A 
   create a vns  A  A  
   create a portgroup  p1 
   add interface to portgroup  leaf0   leaf0-eth5  p1 
   create a portgroup  p2 
   add interface to portgroup  leaf0   leaf0-eth6  p2 
   add portgroup to vns  A  A  p1  -1 
   add portgroup to vns  A  A  p2  -1 
   mininet ping  bm0  ${bm1_ip}						 
	 
ping bm0 to bm1 single leaf static endpoints
   delete portgroup from vns  A  A  p1  -1 
   delete portgroup from vns  A  A  p2  -1
   create a endpoint  A  A  e1 
   create a endpoint  A  A  e2 
   add portgroup to endpoint  A   A  e2  p2  -1
   add portgroup to endpoint  A   A  e1  p1  -1
   mininet ping  bm0  ${bm1_ip} 

ping bm0 to bm2 dual rack single leaf dynamic endpoints
   delete a endpoint  A  A  e1 
   delete a endpoint  A  A  e2
   create a portgroup  p3 
   add interface to portgroup  leaf1  leaf1-eth5  p3 
   add portgroup to vns  A  A  p3  -1 
   add portgroup to vns  A  A  p1  -1 
   mininet ping  bm0  ${bm2_ip}					 
		
ping bm0 to bm2 dual rack single leaf static endpoints     
   delete portgroup from vns  A  A  p1  -1 
   delete portgroup from vns  A  A  p3  -1
   create a endpoint  A  A  e1  
   add portgroup to endpoint  A  A  e1  p1  -1 
   create a endpoint  A  A  e2  
   add portgroup to endpoint  A  A  e2  p3  -1
   mininet ping  bm0  ${bm2_ip} 
   
ping bm0 to bm1 single leaf dynamic endpoints tag
   delete a endpoint  A  A  e1 
   delete a endpoint  A  A  e2
   add portgroup to vns  A  A  p1  10 
   add portgroup to vns  A  A  p2  10 
   mininet link tag  bm0  bm0-bond0  10  10.0.0.1
   mininet link tag  bm1  bm1-bond0  10  10.0.0.2
   mininet ping  bm0  ${bm1_ip} 					
		
ping bm0 to bm1 single leaf static endpoints tag
   delete portgroup from vns  A  A  p1  10 
   delete portgroup from vns  A  A  p2  10
   create a endpoint  A  A  e1 
   add portgroup to endpoint  A  A  e1  p1  10
   create a endpoint  A  A  e2 
   add portgroup to endpoint  A  A  e2  p2  10
   mininet ping  bm0  ${bm1_ip}

ping bm0 to bm2 dual rack single leaf dynamic endpoints tag     
   delete a endpoint  A  A  e1  
   delete a endpoint  A  A  e2
   add portgroup to vns  A  A  p1  10 
   add portgroup to vns  A  A  p3  10 
   mininet link tag  bm2  bm2-bond0  10  10.0.0.3
   mininet ping  bm0  ${bm2_ip}   
   
ping bm0 to bm2 dual rack single leaf static endpoints tag 
   delete portgroup from vns  A  A  p1  10 
   delete portgroup from vns  A  A  p3  10 
   create a endpoint  A  A  e1  
   add portgroup to endpoint  A  A  e1  p1  10
   create a endpoint  A  A  e2  
   add portgroup to endpoint  A  A  e2  p3  10
   mininet ping   bm0  ${bm2_ip}  
   
Tear down the config 
   delete a tenant  A 
   delete interface from portgroup  leaf0  leaf0-eth5  p1
   delete interface from portgroup  leaf0  leaf0-eth6  p2
   delete interface from portgroup  leaf1  leaf1-eth5  p3   
   delete a portgroup  p1
   delete a portgroup  p2
   delete a portgroup  p3

* Keywords      
create a tenant  [Arguments]  ${tenant} 
  REST create tenant  ${tenant}    

delete a tenant  [Arguments]  ${tenant} 
  	REST delete tenant  ${tenant}    

create a vns  [Arguments]  ${tenant}  ${vns}  
	REST create vns  ${tenant}  ${vns}   

delete a vns  [Arguments]  ${tenant}  ${vns} 
  	REST delete vns  ${tenant}  ${vns}   

create a portgroup  [Arguments]  ${pg}
  	REST create portgroup  ${pg}    

delete a portgroup  [Arguments]  ${pg}
  	REST delete portgroup  ${pg}    

create a endpoint  [Arguments]  ${tenant}  ${vns}  ${endpoint} 
  	REST create endpoint  ${tenant}  ${vns}  ${endpoint}  

delete a endpoint  [Arguments]  ${tenant}  ${vns}  ${endpoint}
  	REST delete endpoint  ${tenant}  ${vns}  ${endpoint}  

add interface to portgroup  [Arguments]  ${switch}  ${intf}  ${pg} 
  	REST add interface to portgroup  ${switch}  ${intf}  ${pg}  

delete interface from portgroup  [Arguments]  ${switch}  ${intf}  ${pg} 
  	REST delete interface from portgroup  ${switch}  ${intf}  ${pg}  

add portgroup to vns  [Arguments]  ${tenant}  ${vns}  ${pg}  ${vlan}
  	REST add portgroup to vns  ${tenant}  ${vns}  ${pg}  ${vlan} 

add portgroup to endpoint  [Arguments]  ${tenant}  ${vns}  ${endpoint}  ${pg}  ${vlan} 

  REST add portgroup to endpoint  ${tenant}  ${vns}  ${endpoint}  ${pg}  ${vlan} 

delete portgroup from vns  [Arguments]  ${tenant}  ${vns}  ${pg}  ${vlan} 

  REST delete portgroup from vns  ${tenant}  ${vns}  ${pg}  ${vlan} 

 
