*Settings
Documentation  Bigtap Inport Mask Test	Suite
Suite Setup  basic-inport suite setup
Suite Teardown  bigtap-inport suite teardown
#Suite Teardown  base suite teardown
Test Setup  bigtap-inport test setup
Test Teardown  base test teardown
Force Tags  Inport Sanity
Library  keywords/BsnCommon.py
Library  keywords_dev/BsnCommonShow.py
Library  keywords_dev/BsnCommonConfig.py
Library  keywords_dev/BigTapCommonConfig.py
Library  keywords_dev/BigTapCommonShow.py

* Variable
${ip_address_1}  10.192.75.7
${ip_address_2}  10.192.75.8
${ip_address_3}  10.192.75.213
${ip_address_4}  10.192.75.214
${ip_address_5}  10.192.75.215
${ip_address_6}  10.192.75.216
${switchlight_version}  SwitchLight 2.0.0-beta1
${console_ip}  10.192.2.89
${console_port}	  6020


*Test Case
Verify # of flows with and without Inport Mask
	Verify Inport Mask
T6090: Verify Inport Mask 
	T6090
T6091: Verify Inport Mask 
	T6091
T6092: Verify Inport Mask 
	T6092
T6093: Verify Inport Mask 
	T6093
T6094: Verify Inport Mask 
	T6094
T6095: Verify Inport Mask 
	T6095
T6096: Verify Inport Mask 
	T6096
T6097: Verify Inport Mask 
	T6097
T6098: Verify Inport Mask 
	T6098
T6099: Verify Inport Mask 
	T6099
T6100: Verify Inport Mask 
	T6100
T6101: Verify Inport Mask 
	T6101
T6102: Verify Inport Mask 
	T6102
T6103: Verify Inport Mask 
	T6103
T6104: Verify Inport Mask 
	T6104
T6105: Verify Inport Mask 
	T6105
T6106: Verify Inport Mask 
	T6106
* Keywords
basic-inport suite setup
	${switchDict}=  REST show switch
	${dpid1}=  return switch dpid  ${switchDict}  ${ip_address_1}
	REST set switch alias  ${dpid1}  LB7
	${dpid2}=  return switch dpid  ${switchDict}  ${ip_address_2}
	REST set switch alias  ${dpid2}  LB8
	${dpid3}=  return switch dpid  ${switchDict}  ${ip_address_3}
	REST set switch alias  ${dpid3}  LY3  
	${dpid4}=  return switch dpid  ${switchDict}  ${ip_address_4}
	REST set switch alias  ${dpid4}  LY4
	${dpid5}=  return switch dpid  ${switchDict}  ${ip_address_5}
	REST set switch alias  ${dpid5}  LB11
	${dpid6}=  return switch dpid  ${switchDict}  ${ip_address_6}
	REST set switch alias  ${dpid6}  LB12
	REST setup bigtap interfaces  ${dpid1}  ethernet5  filter  LB7-F1-DL206-D1
	REST setup bigtap interfaces  ${dpid1}  ethernet6  filter  LB7-F2-DL206-D2
	REST setup bigtap interfaces  ${dpid1}  ethernet7  filter  LB7-F3-DL206-D3
	REST setup bigtap interfaces  ${dpid1}  ethernet8  filter  LB7-F4-DL206-D4
	REST setup bigtap interfaces  ${dpid1}  ethernet27  delivery  LB7-D1-DL206-F1
	REST setup bigtap interfaces  ${dpid4}  ethernet37  service  S5-LY4-AR4_E3-PRE
	REST setup bigtap interfaces  ${dpid4}  ethernet38  service  S5-LY4-AR4_E4-POST
	REST setup bigtap interfaces  ${dpid4}  ethernet37  service  S5-LY4-AR4_E3-PRE
	REST setup bigtap interfaces  ${dpid2}  ethernet3  service  S2-LB8_E3-C2950_E23-PRE
	REST setup bigtap interfaces  ${dpid2}  ethernet4  service  S2-LB8_E4-C2950_E24-POST
	REST setup bigtap interfaces  ${dpid2}  ethernet27  delivery  LB8-D1-DL207-F1
	REST setup bigtap interfaces  ${dpid2}  ethernet28  delivery  LB8-D2-DL207-F2
	REST setup bigtap interfaces  ${dpid2}  ethernet29  delivery  LB8-D3-DL207-F3
	REST setup bigtap interfaces  ${dpid2}  ethernet30  delivery  LB8-D4-DL207-F4
	REST setup bigtap interfaces  ${dpid5}  ethernet27  delivery  LB11-D1-AR4-F1
	REST setup bigtap interfaces  ${dpid5}  ethernet28  delivery  LB11-D2-AR4-F2
	REST setup bigtap interfaces  ${dpid6}  ethernet28  delivery  LB12-D1-HP1-F1
	REST setup bigtap interfaces  ${dpid6}  ethernet29  delivery  LB12-D2-HP1-F2

bigtap-inport test setup
    REST disable feature  inport-mask
    REST add policy  admin-view  testPol  forward
    REST add policy match  admin-view  testPol  1  {"ether-type": 2048, "dst-tp-port": 80, "ip-proto": 6, "sequence": 1} 
    REST add policy interface  admin-view  testPol  LB7-F1-DL206-D1  filter 
    REST add policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter 
    REST add policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST add policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST add bigtap service  S5-LY4  S5-LY4-AR4_E3-PRE  S5-LY4-AR4_E4-POST  
    REST add bigtap service  S2-LB8  S2-LB8_E3-C2950_E23-PRE  S2-LB8_E4-C2950_E24-POST  
    sleepnow  3

Verify Inport Mask
    REST show bigtap policy  testPol  4  1
    REST disable feature  inport-mask
    sleepnow  2
    ${switchDpid}=  REST show switch dpid  LB7  
    ${switchFlowVal}=  REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  7
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal}=   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
  
T6090
    REST disable feature  inport-mask
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery
    sleepnow  2
    ${switchDpid}=  REST show switch dpid  LB7
    ${switchFlowVal}=  REST show switch flow  ${switchDpid}
    Should Be Equal As Integers  ${switchFlowVal}  7
    ${switchDpid1}=  REST show switch dpid  LB8
    ${switchFlowVa1l}=   REST show switch flow  ${switchDpid1}
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal}=  REST show switch flow  ${switchDpid}
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l}=  REST show switch flow  ${switchDpid1}
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    ${switchDpid2}=  REST show switch dpid  LY3
    ${switchFlowVa12}=  REST show switch flow  ${switchDpid2}
    ${switchDpid3}=  REST show switch dpid  LY4
    ${switchFlowVa13}=  REST show switch flow  ${switchDpid3}
    REST compare coreswitch flows  ${switchFlowVa12}  ${switchFlowVa13}  4  3

T6091
    REST disable feature  inport-mask
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery
    REST add service to policy  admin-view  testPol  S5-LY4  1
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery
    sleepnow  2
    ${switchDpid}=  REST show switch dpid  LB7
    ${switchFlowVal}=  REST show switch flow  ${switchDpid}
    Should Be Equal As Integers  ${switchFlowVal}  7
    ${switchDpid1}=  REST show switch dpid  LB8
    ${switchFlowVa1l}=  REST show switch flow  ${switchDpid1}
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal}=  REST show switch flow  ${switchDpid}
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l}=  REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    ${switchDpid2}=  REST show switch dpid  LY3  
    ${switchFlowVa12}=  REST show switch flow  ${switchDpid2}  
    ${switchDpid3}=  REST show switch dpid  LY4  
    ${switchFlowVa13}=  REST show switch flow  ${switchDpid3}
    REST compare coreswitch flows  ${switchFlowVa12}  ${switchFlowVa13}  4  3

T6092
    REST disable feature  inport-mask 
    REST add service to policy  admin-view  testPol  S2-LB8  1
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    sleepnow  2
    ${switchDpid}=  REST show switch dpid  LB7
    ${switchFlowVal}=  REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  7
    ${switchDpid1}=  REST show switch dpid  LB8 
    ${switchFlowVa1l}=  REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  5
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal}=   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l}=   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  5
    ${switchDpid2}=  REST show switch dpid  LY3
    ${switchFlowVa12} =   REST show switch flow  ${switchDpid2}  
    ${switchDpid3}=  REST show switch dpid  LY4
    ${switchFlowVa13}=   REST show switch flow  ${switchDpid3}  
    REST compare coreswitch flows  ${switchFlowVa12}  ${switchFlowVa13}  4  3
    
T6093
    REST disable feature  inport-mask 
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    sleepnow  3
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D2-DL207-F2  delivery 
    REST add policy interface  admin-view  testPol  LB8-D3-DL207-F3  delivery 
    REST add policy interface  admin-view  testPol  LB8-D4-DL207-F4  delivery 
    sleepnow  3
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    ${switchDpid2} =  REST show switch dpid  LY3  
    ${switchFlowVa12} =   REST show switch flow  ${switchDpid2}  
    ${switchDpid3} =  REST show switch dpid  LY4  
    ${switchFlowVa13} =   REST show switch flow  ${switchDpid3}  
    REST compare coreswitch flows  ${switchFlowVa12}   ${switchFlowVa13}  4  3  
T6094
    REST disable feature  inport-mask 
    REST delete service from policy  admin-view  testPol  S2-LB8  
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    sleepnow  3
    REST add service to policy  admin-view  testPol  S2-LB8   1
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D2-DL207-F2  delivery 
    REST add policy interface  admin-view  testPol  LB8-D3-DL207-F3  delivery 
    REST add policy interface  admin-view  testPol  LB8-D4-DL207-F4  delivery 
    sleepnow  3
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  5
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  5
    ${switchDpid2} =  REST show switch dpid  LY3  
    ${switchFlowVa12} =   REST show switch flow  ${switchDpid2}  
    ${switchDpid3} =  REST show switch dpid  LY4  
    ${switchFlowVa13} =   REST show switch flow  ${switchDpid3}  
    REST compare coreswitch flows  ${switchFlowVa12}   ${switchFlowVa13}  4  3  
T6095
    REST disable feature  inport-mask 
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    sleepnow  3
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D2-DL207-F2  delivery 
    REST add policy interface  admin-view  testPol  LB8-D3-DL207-F3  delivery 
    REST add policy interface  admin-view  testPol  LB8-D4-DL207-F4  delivery 
    sleepnow  3
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  7
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  4
    ${switchDpid2} =  REST show switch dpid  LY3  
    ${switchFlowVa12} =   REST show switch flow  ${switchDpid2}  
    ${switchDpid3} =  REST show switch dpid  LY4  
    ${switchFlowVa13} =   REST show switch flow  ${switchDpid3}  
    REST compare coreswitch flows  ${switchFlowVa12}   ${switchFlowVa13}  4  3  
T6096
    REST disable feature  inport-mask 
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    sleepnow  3
    REST add service to policy  admin-view  testPol  S2-LB8   1
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D2-DL207-F2  delivery 
    REST add policy interface  admin-view  testPol  LB8-D3-DL207-F3  delivery 
    REST add policy interface  admin-view  testPol  LB8-D4-DL207-F4  delivery 
    sleepnow  3
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  7
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  5
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVa1l} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVa1l}  5
    ${switchDpid2} =  REST show switch dpid  LY3  
    ${switchFlowVa12} =   REST show switch flow  ${switchDpid2}  
    ${switchDpid3} =  REST show switch dpid  LY4  
    ${switchFlowVa13} =   REST show switch flow  ${switchDpid3}  
    REST compare coreswitch flows  ${switchFlowVa12}   ${switchFlowVa13}  4  3

T6097
    REST disable feature  inport-mask  
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D2-DL207-F2  delivery 
    REST add policy interface  admin-view  testPol  LB8-D3-DL207-F3  delivery 
    REST add policy interface  admin-view  testPol  LB8-D4-DL207-F4  delivery 
    REST add service to policy  admin-view  testPol  S5-LY4   1
    sleepnow  1
    REST add service to policy  admin-view  testPol  S2-LB8   2
    sleepnow  2
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  7
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5
    REST enable feature  inport-mask
    sleepnow  2
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchDpid2} =  REST show switch dpid  LY3  
    ${switchFlowVa12} =   REST show switch flow  ${switchDpid2}  
    ${switchDpid3} =  REST show switch dpid  LY4  
    ${switchFlowVa13} =   REST show switch flow  ${switchDpid3}  
    REST compare coreswitch flows  ${switchFlowVa12}   ${switchFlowVa13}  5  3  
T6098
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  4  3  
T6099
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add service to policy  admin-view  testPol  S2-LB8   1
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  4  3  
T6100
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add service to policy  admin-view  testPol  S5-LY4   1
    sleepnow  2     
    REST add service to policy  admin-view  testPol  S2-LB8   2
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  6  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
T6101
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB11-D1-AR4-F1  delivery 
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid5} =  REST show switch dpid  LB11  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  4  3  
T6102
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F2-DL206-D2  filter 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB11-D1-AR4-F1  delivery 
    REST add service to policy  admin-view  testPol  S5-LY4   1
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchDpid5} =  REST show switch dpid  LB11  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  6  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
T6103
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB12-F2-HP1-D2  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  5  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  5  
    ${switchDpid5} =  REST show switch dpid  LB11  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  3  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  3  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  4  3  
T6104
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB12-F2-HP1-D2  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add service to policy  admin-view  testPol  S2-LB8   2
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  5  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  5  
    ${switchDpid5} =  REST show switch dpid  LB11  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  3  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  3  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  4  3  
T6105
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB12-F2-HP1-D2  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add service to policy  admin-view  testPol  S5-LY4   1
    REST add service to policy  admin-view  testPol  S2-LB8   2
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  5  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  5  
    ${switchDpid5} =  REST show switch dpid  LB11  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  3  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  6  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  5  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  3  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
T6106
    REST disable feature  inport-mask     
    REST delete policy interface  admin-view  testPol  LB7-D1-DL206-F1  delivery 
    REST delete policy interface  admin-view  testPol  LB7-F3-DL206-D3  filter 
    REST delete policy interface  admin-view  testPol  LB7-F4-DL206-D4  filter 
    REST add policy interface  admin-view  testPol  LB12-F1-HP1-D1  filter 
    REST add policy interface  admin-view  testPol  LB12-F2-HP1-D2  filter 
    REST add policy interface  admin-view  testPol  LB8-D1-DL207-F1  delivery 
    REST add policy interface  admin-view  testPol  LB8-D2-DL207-F2  delivery 
    REST add policy interface  admin-view  testPol  LB11-D1-AR4-F1   delivery 
    REST add policy interface  admin-view  testPol  LB11-D2-AR4-F2   delivery 
    sleepnow  2     
    ${switchDpid} =  REST show switch dpid  LB7  
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  5  
    ${switchDpid1} =  REST show switch dpid  LB8  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchDpid2} =  REST show switch dpid  LB12  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  5  
    ${switchDpid5} =  REST show switch dpid  LB11  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  5  3  
    REST enable feature  inport-mask     
    sleepnow  2     
    ${switchFlowVal} =   REST show switch flow  ${switchDpid}  
    Should Be Equal As Integers  ${switchFlowVal}  4  
    ${switchFlowVal1} =   REST show switch flow  ${switchDpid1}  
    Should Be Equal As Integers  ${switchFlowVal1}  4  
    ${switchFlowVal2} =   REST show switch flow  ${switchDpid2}  
    Should Be Equal As Integers  ${switchFlowVal2}  4  
    ${switchFlowVal5} =   REST show switch flow  ${switchDpid5}  
    Should Be Equal As Integers  ${switchFlowVal5}  4  
    ${switchDpid3} =  REST show switch dpid  LY3  
    ${switchFlowVal3} =   REST show switch flow  ${switchDpid3}  
    ${switchDpid4} =  REST show switch dpid  LY4  
    ${switchFlowVal4} =   REST show switch flow  ${switchDpid4}  
    REST compare coreswitch flows  ${switchFlowVal3}   ${switchFlowVal4}  4  3  

bigtap-inport suite teardown
    REST delete policy  admin-view  testPol
    REST delete bigtap service  S5-LY4
    REST delete bigtap service  S2-LB8