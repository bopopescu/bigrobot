* Setting
Documentation   T5 Policy two spine three rack with dual-tor Test Suite
Suite Setup     base suite setup
Suite Teardown  base suite teardown
Test Setup      setup topology
Test Teardown   teardown topology
#Suite Setup		setup topology
#Suite Teardown	teardown topology
Force Tags      T5 Sanity
Library         keywords/BsnCommon.py
Library         keywords/Mininet.py
Library         keywords/T5.py
Library         keywords/T5L3.py
Library         keywords_dev/animesh/BsnCommonShow.py
Resource		testsuites_dev/t5_policy_fabric_cfg.txt
Resource		testsuites_dev/svoora/T5_Policy/t5_policy_variables.txt


* Test Cases

T1 Interface tenant permit policy src-ip to dest-ip 
	[Tags]
	Policy tenant interface  10  permit  ${policy_bm1_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm1_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0 

T2 Interface tenant deny policy src-ip to dest-ip
	[Tags]
	Policy tenant interface  10  deny  ${policy_bm1_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm1_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	 
T3 Interface tenant permit policy src-mask to dest-ip
	[Tags]
	Policy tenant interface  10  permit  ${policy_vns2_ip1}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T4 Interface tenant deny policy src-mask to dest-ip
	[Tags]
	Policy tenant interface  10  deny  ${policy_vns2_ip1}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T5 Interface tenant deny policy src-ip to dest-mask
	[Tags]
	Policy tenant interface  10  deny  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T6 Interface tenant permit policy src-mask to dest-mask
	[Tags]
	Policy tenant interface  10  permit  ${policy_vns2_ip1}  ${policy_vns1_ip1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T7 Interface tenant permit policy src-ip to dest-vns
	[Tags]
	Policy tenant interface  10  permit  ${policy_bm6_ip}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T8 Interface tenant deny policy src-ip to dest-vns
	[Tags]
	Policy tenant interface  10  deny  ${policy_bm6_ip}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T9 Interface tenant permit src-ip to dest-tenant
[Tags]
	Policy tenant interface  10  permit  ${policy_bm6_ip}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T10 Interface tenant deny src-ip to dest-tenant
[Tags]
	Policy tenant interface  10  deny  ${policy_bm6_ip}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########
T11 Interface tenant permit policy src-ip to any
[Tags]
	Policy tenant interface  10  deny  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########
T12 Interface tenant deny policy src-ip to any
	[Tags]
	Policy tenant interface  10  deny  ${policy_vns2_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T13 Interface tenant permit policy src-tenant to dest-ip
	[Tags]
	Policy tenant interface  10  permit  ${policy_tenant2}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T14 Interface tenant deny policy src-tenant to dest-ip
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2	}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T15 Interface tenant permit policy src-tenant to dest-tenant
	[Tags]
	Policy tenant interface  10  permit  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T16 Interface tenant deny policy src-tenant to dest-tenant
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T17 Interface tenant permit policy src-tenant to dest-vns
	[Tags]
	Policy tenant interface  10  permit  ${policy_tenant2}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T18 Interface tenant deny policy src-tenant to dest-vns
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

######  **  ANY need more investigation  **  ########	
T19 Interface tenant permit policy src-tenant to any
	[Tags]
	Policy tenant interface  10  permit  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

######  **  ANY need more investigation  **  ########	
T20 Interface tenant deny policy src-tenant to any
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T21 Interface tenant permit policy src-vns to dest-ip
	[Tags]
	Policy tenant interface  10  permit  ${policy_vns4}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T22 Interface tenant deny policy src-vns to dest-ip
	[Tags]
	Policy tenant interface  10  deny  ${policy_vns4}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T23 Interface tenant permit policy src-vns to dest-tenant
	[Tags]
	Policy tenant interface  10  permit  ${policy_vns4}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T24 Interface tenant deny policy src-vns to dest-tenant
	[Tags]
	Policy tenant interface  10  deny  ${policy_vns4}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
T25 Interface tenant permit policy src-vns to dest-vns
	[Tags]
	Policy tenant interface  10  permit  ${policy_vns4}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0
	
T26 Interface tenant deny policy src-vns to dest-vns
	[Tags]
	Policy tenant interface  10  deny  ${policy_vns4}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

######  **  ANY need more investigation  **  ########		
T27 Interface tenant permit policy src-vns to any
	[Tags]
	Policy tenant interface  10  permit  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T28 Interface tenant deny policy src-vns to any
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T29 Interface tenant permit policy any to dest-ip
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T30 Interface tenant deny policy any to dest-ip
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T31 Interface tenant permit policy any to dest-tenant
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T32 Interface tenant deny policy any to dest-tenant
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T33 Interface tenant permit policy any to dest-vns
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T34 Interface tenant deny policy any to dest-vns
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T35 Interface tenant permit policy any to any
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100
	
######  **  ANY need more investigation  **  ########	
T36 Interface tenant deny policy any to any
	[Tags]
	Policy tenant interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100


T37 Interface vns permit policy src-ip to dest-ip 
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T38 Interface vns deny policy src-ip to dest-ip
	[Tags]
	Policy vns interface  10  deny  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

T39 Interface vns permit policy src-ip to dest-vns
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T40 Interface vns deny policy src-ip to dest-vns
	[Tags]
	Policy vns interface  10  deny  ${policy_bm6_ip}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

T41 Interface vns permit src-ip to dest-tenant
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T42 Interface vns deny src-ip to dest-tenant
	[Tags]
	Policy vns interface  10  deny  ${policy_bm6_ip}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

######  **  ANY need more investigation  **  ########	
T43 Interface vns permit policy src-ip to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T44 Interface vns deny policy src-ip to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T45 Interface vns permit policy src-tenant to dest-ip
	[Tags]
	Policy vns interface  10  permit  ${policy_tenant2}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T46 Interface vns deny policy src-tenant to dest-ip
	[Tags]
	Policy vns interface  10  deny  ${policy_tenant2}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

T47 Interface vns permit policy src-tenant to dest-tenant
	[Tags]
	Policy vns interface  10  permit  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T48 Interface vns deny policy src-tenant to dest-tenant
	[Tags]
	Policy vns interface  10  deny  ${policy_tenant2}  ${policy_tenant1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

T49 Interface vns permit policy src-tenant to dest-vns
	[Tags]
	Policy vns interface  10  permit  ${policy_tenant2}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T50 Interface vns deny policy src-tenant to dest-vns
	[Tags]
	Policy vns interface  10  deny  ${policy_tenant2}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

######  **  ANY need more investigation  **  ########	
T51 Interface vns permit policy src-tenant to any
	[Tags]
	Policy vns interface  10  permit  ${policy_tenant2}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T52 Interface vns deny policy src-tenant to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0


T53 Interface vns permit policy src-vns to dest-ip
	[Tags]
	Policy vns interface  10  permit  ${policy_vns4}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T54 Interface vns deny policy src-vns to dest-ip
	[Tags]
	Policy vns interface  10  deny  ${policy_vns4}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

T55 Interface vns permit policy src-vns to dest-tenant
	[Tags]
	Policy vns interface  10  permit  ${policy_vns4}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T56 Interface vns deny policy src-vns to dest-tenant
	[Tags]
	Policy vns interface  10  deny  ${policy_vns4}  ${policy_tenant2}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

T57 Interface vns permit policy src-vns to dest-vns
	[Tags]
	Policy vns interface  10  permit  ${policy_vns4}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

T58 Interface vns deny policy src-vns to dest-vns
	[Tags]
	Policy vns interface  10  deny  ${policy_vns4}  ${policy_vns1}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 100

######  **  ANY need more investigation  **  ########	
T59 Interface vns permit policy src-vns to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T60 Interface vns deny policy src-vns to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T61 Interface vns permit policy any to dest-ip
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T62 Interface vns deny policy any to dest-ip
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T63 Interface vns permit policy any to dest-tenant
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T64 Interface vns deny policy any to dest-tenant
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T65 Interface vns permit policy any to dest-vns
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T66 Interface vns deny policy any to dest-vns
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T67 Interface vns permit policy any to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0

######  **  ANY need more investigation  **  ########	
T68 Interface vns deny policy any to any
	[Tags]
	Policy vns interface  10  permit  ${policy_bm6_ip}  ${policy_bm0_ip}
	${loss}=									mininet l3 ping		${bm6_name}				${bm0_name}		3
	sleep										1
	Should Be True  							${loss} == 0



T69 Interface tenant and vns permit policy src-ip to dest-ip
T70 Interface tenant permit vns deny policy src-ip to dest-ip
T71 Interface tenant deny vsn permit policy src-ip to dest-ip
T72 Interface tenant and vns deny policy src-ip to dest-ip

T73 Interface tenant and vns permit policy src-vns to dest-vns
T74 Interface tenant permit vns deny policy src-vns to dest-vns
T75 Interface tenant deny vsn permit policy src-vns to dest-vns
T76 Interface tenant and vns deny policy src-vns to dest-vns

T77 Interface tenant and vns permit policy src-tenant to dest-tenant
T78 Interface tenant permit vns deny policy src-tenant to dest-tenant
T78 Interface tenant deny vsn permit policy src-tenant to dest-tenant
T79 Interface tenant and vns deny policy src-tenant to dest-tenant

#NEXT-HOP
T80 Interface tenant next-hop policy src-tenant to dest-tenant
T81 Interface tenant next-hop policy src-tenant to ip
T82 Interface tenant next-hop policy src-ip to dest-tenant
T83 Interface tenant next-hop policy src-ip to dest-ip
T84 Interface tenant next-hop policy src-vns to dest-tenant
T85 Interface tenant next-hop policy src-vns to ip

T86 Interface vns next-hop policy src-tenant to dest-tenant
T87 Interface vns next-hop policy src-tenant to ip
T88 Interface vns next-hop policy src-ip to dest-tenant
T89 Interface vns next-hop policy src-ip to dest-ip
T90 Interface vns next-hop policy src-vns to dest-tenant
T91 Interface vns next-hop policy src-vns to ip


#ECMP-GROUP

T92 Interface tenant ecmp-group policy src-tenant to dest-tenant
T93 Interface tenant ecmp-group policy src-tenant to ip
T94 Interface tenant ecmp-group policy src-ip to dest-tenant
T95 Interface tenant ecmp-group policy src-ip to dest-ip
T96 Interface tenant ecmp-group policy src-vns to dest-tenant
T97 Interface tenant ecmp-group policy src-vns to ip

T98 Interface vns ecmp-group policy src-tenant to dest-tenant
T99 Interface vns ecmp-group policy src-tenant to ip
T100 Interface vns ecmp-group policy src-ip to dest-tenant
T101 Interface vns ecmp-group policy src-ip to dest-ip
T102 Interface vns ecmp-group policy src-vns to dest-tenant
T103 Interface vns ecmp-group policy src-vns to ip


T104 Remove Add permit policy at tenant interface
T105 Remove Add permit policy at vns interface
T106 Remove Add next-hop policy at tenant interface
T107 Remove Add next-hop policy at vns interface
T108 Remove Add ecmp-group at tenant interface
T109 Remove Add ecmp-group at vns interface

T110 shut no shut switch interface
T111 Remove Add tenant interface
T112 Remove Add vns interface

T113 Remove Add switch
T114 HA failover
T115 Reboot standby
T116 Reboot master
T117 poweroff switch
T118 poweron switch
T119 poweroff master controller
T120 poweroff slave controller




	
* Keywords
	




setup topology
	add fabric switch
	sleep 										1
	REST add portgroup							${portgroup0}
	REST add portgroup							${portgroup1}
	REST add portgroup							${portgroup2}
	REST add portgroup							${portgroup3}
	REST add portgroup							${portgroup4}
	REST add portgroup							${portgroup5}
	REST add portgroup							${portgroup6}
	REST add portgroup							${portgroup7}
	REST add portgroup							${portgroup8}
	REST add portgroup							${portgroup9}
	REST add portgroup							${portgroup10}
	REST add portgroup							${portgroup11}
	REST add leaf group							${leaf0a_name}		${leafgroup0}
	REST add leaf group							${leaf0b_name}		${leafgroup0}
	REST add leaf group							${leaf1a_name}		${leafgroup1}
	REST add leaf group							${leaf1b_name}		${leafgroup1}
	REST add leaf group							${leaf2a_name}		${leafgroup2}
	REST add leaf group							${leaf2b_name}		${leafgroup2}
	REST add interface to portgroup				${leaf0a_name}		${leaf0a_intf1}		${portgroup0} 
	REST add interface to portgroup				${leaf0b_name}		${leaf0b_intf1}		${portgroup0} 
	REST add interface to portgroup				${leaf0a_name}		${leaf0a_intf2}		${portgroup1} 
	REST add interface to portgroup				${leaf0b_name}		${leaf0b_intf2}		${portgroup1} 
	REST add interface to portgroup				${leaf0a_name}		${leaf0a_intf3}		${portgroup2} 
	REST add interface to portgroup				${leaf0b_name}		${leaf0b_intf3}		${portgroup2} 
	REST add interface to portgroup				${leaf0a_name}		${leaf0a_intf4}		${portgroup3} 
	REST add interface to portgroup				${leaf0b_name}		${leaf0b_intf4}		${portgroup3} 	
	REST add interface to portgroup				${leaf1a_name}		${leaf1a_intf1}		${portgroup4} 
	REST add interface to portgroup				${leaf1b_name}		${leaf1b_intf1}		${portgroup4} 
	REST add interface to portgroup				${leaf1a_name}		${leaf1a_intf2}		${portgroup5} 
	REST add interface to portgroup				${leaf1b_name}		${leaf1b_intf2}		${portgroup5} 
	REST add interface to portgroup				${leaf1a_name}		${leaf1a_intf3}		${portgroup6} 
	REST add interface to portgroup				${leaf1b_name}		${leaf1b_intf3}		${portgroup6} 
	REST add interface to portgroup				${leaf1a_name}		${leaf1a_intf4}		${portgroup7} 
	REST add interface to portgroup				${leaf1b_name}		${leaf1b_intf4}		${portgroup7} 
	REST add interface to portgroup				${leaf2a_name}		${leaf2a_intf1}		${portgroup8} 
	REST add interface to portgroup				${leaf2b_name}		${leaf2b_intf1}		${portgroup8} 
	REST add interface to portgroup				${leaf2a_name}		${leaf2a_intf2}		${portgroup9} 
	REST add interface to portgroup				${leaf2b_name}		${leaf2b_intf2}		${portgroup9} 
	REST add interface to portgroup				${leaf2a_name}		${leaf2a_intf3}		${portgroup10} 
	REST add interface to portgroup				${leaf2b_name}		${leaf2b_intf3}		${portgroup10} 
	REST add interface to portgroup				${leaf2a_name}		${leaf2a_intf4}		${portgroup11} 
	REST add interface to portgroup				${leaf2b_name}		${leaf2b_intf4}		${portgroup11} 	
	REST add tenant 							${tenant1_name}
	REST add tenant								${tenant2_name}
	REST add vns								${tenant1_name}		${vns1_1}
	REST add vns								${tenant1_name}		${vns1_2}
	REST add vns								${tenant1_name}		${vns1_3}
	REST add vns								${tenant2_name}		${vns2_1}
	REST add vns								${tenant2_name}		${vns2_2}
	REST add vns								${tenant2_name}		${vns2_3}
	REST add vns ip  							${tenant1_name}  	${vns1_1}  		${vns1_ip1}	  		${vns1_subnet1} 	
	REST add vns ip  							${tenant1_name}  	${vns1_2}  		${vns1_ip2}	  		${vns1_subnet2} 	
	REST add vns ip  							${tenant1_name}  	${vns1_3}  		${vns1_ip3}	  		${vns1_subnet3}
	REST add vns ip  							${tenant2_name}  	${vns2_1}  		${vns2_ip1}	  		${vns2_subnet1} 	
	REST add vns ip  							${tenant2_name}  	${vns2_2}  		${vns2_ip2}	  		${vns2_subnet2} 	
	REST add vns ip  							${tenant2_name}  	${vns2_3}  		${vns2_ip3}	  		${vns2_subnet3}
	REST add portgroup to vns					${tenant1_name}  	${vns1_1} 		${portgroup0} 		${untaggedvlan}	
	REST add portgroup to vns					${tenant1_name}  	${vns1_2} 		${portgroup1} 		${untaggedvlan}	
	REST add portgroup to vns					${tenant2_name}  	${vns2_3} 		${portgroup2} 		${vns2_vlan3}
	REST add portgroup to vns					${tenant2_name}  	${vns2_2} 		${portgroup3} 		${untaggedvlan}
	REST add portgroup to vns					${tenant1_name}  	${vns1_1} 		${portgroup4} 		${vns1_vlan1}
	REST add portgroup to vns					${tenant1_name}  	${vns1_2} 		${portgroup5} 		${untaggedvlan}
	REST add portgroup to vns					${tenant2_name}  	${vns2_1} 		${portgroup6} 		${vns2_vlan1}
	REST add portgroup to vns					${tenant1_name}  	${vns1_2} 		${portgroup7} 		${untaggedvlan}
	REST add portgroup to vns					${tenant2_name}  	${vns2_1} 		${portgroup8} 		${vns2_vlan1}
	REST add portgroup to vns					${tenant2_name}  	${vns2_2} 		${portgroup9} 		${vns2_vlan2}
	REST add portgroup to vns					${tenant2_name}  	${vns2_3} 		${portgroup10} 		${untaggedvlan}	
	REST add static routes						${tenant1_name}		0.0.0.0/0		 {"tenant-name": "system"}
	REST add static routes						${tenant2_name}		0.0.0.0/0		 {"tenant-name": "system"}	
	
teardown topology
	delete fabric switch
	sleep										1
	REST delete portgroup from vns				${tenant2_name}  	${vns2_3} 		${portgroup10} 		${untaggedvlan}	
	REST delete portgroup from vns				${tenant1_name}  	${vns1_1} 		${portgroup0} 		${untaggedvlan}	
	REST delete portgroup from vns				${tenant1_name}  	${vns1_2} 		${portgroup1} 		${untaggedvlan}	
	REST delete portgroup from vns				${tenant2_name}  	${vns2_3} 		${portgroup2} 		${vns2_vlan3}
	REST delete portgroup from vns				${tenant2_name}  	${vns2_2} 		${portgroup3} 		${untaggedvlan}
	REST delete portgroup from vns				${tenant1_name}  	${vns1_1} 		${portgroup4} 		${vns1_vlan1}
	REST delete portgroup from vns				${tenant1_name}  	${vns1_2} 		${portgroup5} 		${untaggedvlan}
	REST delete portgroup from vns				${tenant2_name}  	${vns2_1} 		${portgroup6} 		${vns2_vlan1}
	REST delete portgroup from vns				${tenant1_name}  	${vns1_2} 		${portgroup7} 		${untaggedvlan}
	REST delete portgroup from vns				${tenant2_name}  	${vns2_1} 		${portgroup8} 		${vns2_vlan1}
	REST delete portgroup from vns				${tenant2_name}  	${vns2_2} 		${portgroup9} 		${vns2_vlan2}
	REST delete vns ip  						${tenant1_name}  	${vns1_1}  		${vns1_ip1}	  		${vns1_subnet1} 	
	REST delete vns ip  						${tenant1_name}  	${vns1_2}  		${vns1_ip2}	  		${vns1_subnet2} 	
	REST delete vns ip  						${tenant1_name}  	${vns1_3}  		${vns1_ip3}	  		${vns1_subnet3}
	REST delete vns ip  						${tenant2_name}  	${vns2_1}  		${vns2_ip1}	  		${vns2_subnet1} 	
	REST delete vns ip  						${tenant2_name}  	${vns2_2}  		${vns2_ip2}	  		${vns2_subnet2} 	
	REST delete vns ip  						${tenant2_name}  	${vns2_3}  		${vns2_ip3}	  		${vns2_subnet3}
	REST delete vns								${tenant1_name}		${vns1_1}
	REST delete vns								${tenant1_name}		${vns1_2}
	REST delete vns								${tenant1_name}		${vns1_3}
	REST delete vns								${tenant2_name}		${vns2_1}
	REST delete vns								${tenant2_name}		${vns2_2}
	REST delete vns								${tenant2_name}		${vns2_3}	
	REST delete tenant							${tenant_system}
	REST delete tenant							${tenant1_name}
	REST delete tenant							${tenant2_name}
	REST delete interface from portgroup			${leaf0a_name}		${leaf0a_intf1}		${portgroup0} 
	REST delete interface from portgroup			${leaf0b_name}		${leaf0b_intf1}		${portgroup0} 
	REST delete interface from portgroup			${leaf0a_name}		${leaf0a_intf2}		${portgroup1} 
	REST delete interface from portgroup			${leaf0b_name}		${leaf0b_intf2}		${portgroup1} 
	REST delete interface from portgroup			${leaf0a_name}		${leaf0a_intf3}		${portgroup2} 
	REST delete interface from portgroup			${leaf0b_name}		${leaf0b_intf3}		${portgroup2} 
	REST delete interface from portgroup			${leaf0a_name}		${leaf0a_intf4}		${portgroup3} 
	REST delete interface from portgroup			${leaf0b_name}		${leaf0b_intf4}		${portgroup3} 	
	REST delete interface from portgroup			${leaf1a_name}		${leaf1a_intf1}		${portgroup4} 
	REST delete interface from portgroup			${leaf1b_name}		${leaf1b_intf1}		${portgroup4} 
	REST delete interface from portgroup			${leaf1a_name}		${leaf1a_intf2}		${portgroup5} 
	REST delete interface from portgroup			${leaf1b_name}		${leaf1b_intf2}		${portgroup5} 
	REST delete interface from portgroup			${leaf1a_name}		${leaf1a_intf3}		${portgroup6} 
	REST delete interface from portgroup			${leaf1b_name}		${leaf1b_intf3}		${portgroup6} 
	REST delete interface from portgroup			${leaf1a_name}		${leaf1a_intf4}		${portgroup7} 
	REST delete interface from portgroup			${leaf1b_name}		${leaf1b_intf4}		${portgroup7} 
	REST delete interface from portgroup			${leaf2a_name}		${leaf2a_intf1}		${portgroup8} 
	REST delete interface from portgroup			${leaf2b_name}		${leaf2b_intf1}		${portgroup8} 
	REST delete interface from portgroup			${leaf2a_name}		${leaf2a_intf2}		${portgroup9} 
	REST delete interface from portgroup			${leaf2b_name}		${leaf2b_intf2}		${portgroup9} 
	REST delete interface from portgroup			${leaf2a_name}		${leaf2a_intf3}		${portgroup10} 
	REST delete interface from portgroup			${leaf2b_name}		${leaf2b_intf3}		${portgroup10} 
	REST delete interface from portgroup			${leaf2a_name}		${leaf2a_intf4}		${portgroup11} 
	REST delete interface from portgroup			${leaf2b_name}		${leaf2b_intf4}		${portgroup11} 	
	REST delete portgroup						${portgroup0}
	REST delete portgroup						${portgroup1}
	REST delete portgroup						${portgroup2}
	REST delete portgroup						${portgroup3}
	REST delete portgroup						${portgroup4}
	REST delete portgroup						${portgroup5}
	REST delete portgroup						${portgroup6}
	REST delete portgroup						${portgroup7}
	REST delete portgroup						${portgroup8}
	REST delete portgroup						${portgroup9}
	REST delete portgroup						${portgroup10}
	REST delete portgroup						${portgroup11}
	sleep										10
	

mininet host config
	mininet host ipcfg							${bm0_name}			${bm0_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm1_name}			${bm1_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm2_name}			${bm2_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm3_name}			${bm3_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm4_name}			${bm4_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm5_name}			${bm5_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm6_name}			${bm6_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm7_name}			${bm7_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm8_name}			${bm8_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm9_name}			${bm9_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm10_name}		${bm10_bondif}	0.0.0.0				0
	mininet host ipcfg							${bm11_name}		${bm11_bondif}	0.0.0.0				0
	sleep										1	
	mininet host ipcfg   						${bm0_name}			${bm0_bondif}	${bm0_ip}			${vns1_subnet1}
	mininet host ipcfg   						${bm1_name}			${bm1_bondif}	${bm1_ip}			${vns1_subnet2}
	mininet host ipcfg							${bm2_name}			${bm2_bondif}	${bm2_ip} 			${vns2_subnet3}
	mininet host ipcfg   						${bm3_name}			${bm3_bondif}	${bm3_ip}			${vns2_subnet2}
	mininet host ipcfg							${bm4_name}			${bm4_bondif}	${bm4_ip}			${vns1_subnet1}
	mininet host ipcfg   						${bm5_name}			${bm5_bondif}	${bm5_ip}			${vns1_subnet2}
	mininet host ipcfg							${bm8_name}			${bm8_bondif}	${bm8_ip}			${vns2_subnet1}
	mininet host ipcfg							${bm9_name}			${bm9_bondif}	${bm9_ip}			${vns2_subnet2}
	mininet host ipcfg   						${bm10_name}		${bm10_bondif}	${bm10_ip}			${vns1_subnet1}	
	mininet host gw								${bm0_name}			${vns1_ip1}		${bm0_bondif}
	mininet host gw								${bm1_name}			${vns1_ip2}		${bm1_bondif}
	mininet host gw								${bm2_name}			${vns2_ip3}		${bm2_bondif}
	mininet host gw								${bm3_name}			${vns2_ip2}		${bm3_bondif}
	mininet host gw								${bm4_name}			${vns1_ip1}		${bm4_bondif}
	mininet host gw								${bm5_name}			${vns1_ip2}		${bm5_bondif}
	mininet host gw								${bm8_name}			${vns2_ip1}		${bm8_bondif}
	mininet host gw								${bm9_name}			${vns2_ip2}		${bm9_bondif}
	mininet host gw								${bm10_name}		${vns2_ip3}		${bm10_bondif}

add inter tenant routing
	REST add tenant								${tenant_system}
	REST add system to tenant routers 			${tenant1_name} 
   	REST add system to tenant routers 			${tenant2_name} 
   	REST add tenant routers to system			${tenant1_name} 
   	REST add tenant routers to system			${tenant2_name} 

delete inter tenant routing
	REST delete tenant routers to system		${tenant1_name}
	REST delete tenant routers to system		${tenant2_name}
	REST delete system to tenant routers		${tenant1_name}
	REST delete system to tenant routers		${tenant2_name}
	REST delete tenant							${tenant_system}
	
Policy tenant interface  [Arguments]  ${seq}  ${action}  ${src}  ${dst} 
	add inter tenant routing
	mininet host config
	REST add policy								${tenant1_name}		${tenant1_polname}		
	REST add policy								${tenant2_name}		${tenant2_polname}
	REST add policy item						${tenant1_name}		${tenant1_polname}		${seq}		${action}		${src}		${dst}
	REST apply policy on tenant					${tenant1_name}		${tenant1_polname}
	common dumps

Policy vns interface  [Arguments]  ${seq}  ${action}  ${src}  ${dst} 
	add inter tenant routing
	mininet host config
	REST add policy								${tenant1_name}		${tenant1_polname}		
	REST add policy								${tenant2_name}		${tenant2_polname}
	REST add policy item						${tenant1_name}		${tenant1_polname}		${seq}		${action}		${src}		${dst}
	REST apply policy on vns					${tenant1_name}		${tenant1_polname}
	common dumps
	

common dumps	
	mininet dump switch							${leaf0a_name}
	mininet dump switch							${leaf0b_name}
	mininet dump switch							${leaf1a_name}
	mininet dump switch							${leaf1b_name}
	mininet dump switch							${leaf2a_name}
	mininet dump switch							${leaf2b_name}
	REST show forwarding switch l3 host route	${leaf0a_name}
	REST show forwarding switch l3 host route	${leaf0b_name}
	REST show forwarding switch l3 host route	${leaf1a_name}
	REST show forwarding switch l3 host route	${leaf1b_name}
	REST show forwarding switch l3 host route	${leaf2a_name}
	REST show forwarding switch l3 host route	${leaf2b_name}	
	REST show forwarding switch l3 cidr route	${leaf0a_name}
	REST show forwarding switch l3 cidr route	${leaf0b_name}
	REST show forwarding switch l3 cidr route	${leaf1a_name}
	REST show forwarding switch l3 cidr route	${leaf1b_name}
	REST show forwarding switch l3 cidr route	${leaf2a_name}
	REST show forwarding switch l3 cidr route	${leaf2b_name}	
	REST show running config
	sleep										1
	#mininet l3 ping							${bm4_name} 		${bm8_ip}		3
	#sleep										1
	#${loss}=  									mininet l3 ping		${bm4_name}		${bm8_ip} 	
	#Should Be True  							${loss} == 0	
	#${endpoints_cnt}=							rest count endpoints mac
#	#Should Be True  							${endpoints_cnt} == 8
	#delete inter tenant routing	