*Settings
Documentation    Fabric Lag Dual Spine Three Rack Test Suite
Suite Setup      base suite setup
Suite Teardown   base suite teardown
Test Setup       base test setup
Test Teardown    base test teardown
Force Tags       T5 Fabric
Library          keywords/BsnCommon.py
Library          keywords_dev/T5.py
Library          keywords_dev/T5Fabric.py
Resource         keywords_dev/t5_dualleaf_three_rack_resource.txt



*Test Case
configure Dual Rack Dual Leaf Topology
    configure fabric switch
    sleep  5
    rest check fabric switch connectivity
   
Verify Fabric Lag formation from leaf node 
	[Tags]	 functional  skipped
	verify fabric lag   leaf0-a
	
verify fabric lag formation from spine node
	[Tags]	 functional  skipped
    verify fabric lag   spine0
	
Remove the Fabric Role spine and verify the lag from leaf switch 
	[Tags]	 functional  skipped
	REST remove fabric role   spine       
    sleep  5 
	verify fabric lag   leaf0-a

Verify Fabric Lag from spine after deleting one spine
	[Tags]	 functional  skipped 
	verify fabric lag   spine0

Add the Fabric Role spine back and verify the lag from leaf switch
	[Tags]	 functional  skipped
	REST configure fabric role   spine0   spine      
    sleep  5 
	verify fabric lag   leaf0-a
	
Verify Fabric Lag from spine after adding back spine node 
	[Tags]	 functional  skipped
	verify fabric lag   spine0
	
remove the peer leaf switch and check the peer-lag from the downfacing lag.
	[Tags]	functional
	rest verify forwarding lag  00:00:00:00:02:00:00:01  leaf0-a
	sleep  3
	rest remove fabric switch  leaf0-b
	sleep  3
	rest verify forwarding lag  00:00:00:00:02:00:00:01  leaf0-a 

Tear down config and topology
    remove fabric switch 
 

* Keywords  

verify fabric lag   [Arguments]  ${switch}
    REST verify fabric lag   ${switch}

