== T5 Functional CLI Test Suite ==

* Setting
Documentation    T5 BVS APP Functional CLI Test Suite
Suite Setup      base suite setup
Suite Teardown   base suite teardown
Test Setup       base test setup
Test Teardown    base test teardown
Force Tags       T5 
Library          keywords/BsnCommon.py
Library          keywords_dev/prashanth/T5.py
Library	         keywords_dev/prashanth/T5Fabric.py
Library          keywords/Mininet.py
Library			 keywords/Ixia.py
Resource         keywords_dev/prashanth/t5_dualleaf_three_rack_resource.txt

* Variables
${leaf0a_spine0_intf0}	ethernet33
${leaf0a_leaf0b_intf0}	ethernet39
${leaf0a_spine1_intf0}	ethernet32
${leaf0a_ixia_intf}		ethernet24
${leaf0b_ixia_intf}		ethernet24
${leaf1a_ixia_intf}		ethernet24
${leaf1b_ixia_intf}		ethernet24
${leaf1a_leaf1b_intf0}	ethernet39
${leaf1a_leaf1b_intf1}	ethernet40
${leaf2a_ixia_intf}		ethernet24
${leaf2b_ixia_intf}		ethernet24
${leaf2a_spine0_intf0}	ethernet31
${leaf2a_spine1_intf0}	ethernet32
${h4_ip}  192.168.0.11
${h5_ip}  192.168.0.30
${h6_ip}  192.168.0.31
${h4_mac}	00:10:18:f0:e9:70
${h5_mac}	90:e2:ba:4f:80:dc
${h6_mac}	90:e2:ba:4e:bb:90
${h1_intf0}  ethernet48
${h1_intf1}  ethernet48
${h2_intf0}  ethernet47
${h2_intf1}  ethernet47
${h3_intf0}  ethernet1
${h3_intf1}  ethernet1
${h4_intf0}  ethernet2
${h4_intf1}  ethernet2
${h5_intf0}  ethernet48
${h5_intf1}  ethernet48
${h6_intf0}  ethernet47
${h6_intf1}  ethernet47
${h1_tag_ip}	192.168.4.20
${h2_tag_ip}	192.168.4.21
${h3_tag_ip}	192.168.4.10
${h1_tag_mac}  90:e2:ba:4e:bc:98
${h2_tag_mac}  90:e2:ba:4f:80:b1
${h3_tag_mac}  00:10:18:f0:eb:e0
${leaf0b_spine0_intf0}	ethernet31
${leaf0b_spine1_intf0}	ethernet32

* Test Case 

add Dual Leaf Three Rack setup
   [Tags]  functional
   sleep  5
   add fabric switch
   sleep  5
   rest verify fabric switch all
   rest verify fabric link

add/delete a tenant
   [Tags]   functional
   add a tenant  t1
   sleep  1
   rest verify tenant  
   delete a tenant  t1
   sleep  1
   rest verify tenant   

add/delete a vns
   [Tags]  functional
   add a tenant  t1
   add a vns  t1  v1 
   rest verify vns
   delete a vns  t1  v1
   sleep  1
   rest verify vns
   rest verify forwarding vlan  00:00:00:00:00:02:00:01  	
   rest verify forwarding vlan  00:00:00:00:00:02:00:02     			 

add a multiple tenant 
   [Tags]  functional
   add a tenant  t1
   add a tenant  t2
   add a tenant  t3
   sleep  3
   rest verify tenant 
   
add a multiple vns same tenant
   [Tags]  functional
   add a tenant  t1
   add a vns  t1  v1
   add a vns  t1  v2
   add a vns  t1  v3
   sleep  5
   rest verify vns  
   
add/verify a portgroup
   [Tags]  functional  skipped
   add a portgroup  p1
   rest verify portgroup
   add interface to portgroup  leaf0  ${bm0_intf0}  p1
   rest verify portgroup interface  p1
   delete interface from portgroup  leaf0  ${bm0_intf0}  p1
   rest verify portgroup interface  p1 
   
add/verify a portgroup from different rack 

Add/delete interface to vns
   [Tags]  functional
   add a tenant  t1
   add a vns  t1  v1
   rest add interface to vns  t1  v1  leaf0  ${bm0_intf0}  -1
   rest add interface to vns  t1  v1  leaf0  ${bm1_intf0}  10
   rest verify vns interface  v1  2
   rest delete interface from vns  t1  v1  leaf0  ${bm1_intf0}  10
   rest verify vns interface  v1  1 
   
add interface to multiple VNS without tag
	[Tags]  feature
	add tenant  t1
	add vns  t1  v1
	rest add interface to vns  t1  v1  leaf0-a 

add interface multiple tag to a same vns
   
tenant name convention 

vns name convention

show vns output verification

show tenant output verification

add/delete endpoint and show endpoint verification

add/delete endpoint and show endpoint static verification

vns stats verification

tenant stats verification

 

Tear down the config
   [Tags]  smoke  sanity 
   delete a tenant  t1
   delete interface from portgroup  leaf0  ${bm0_intf0}  p1
   delete interface from portgroup  leaf0  ${bm1_intf0}  p2
   delete interface from portgroup  leaf1  ${bm2_intf0}  p3   
   delete a portgroup  p1
   delete a portgroup  p2
   delete a portgroup  p3
   delete fabric switch

* Keywords      
T5 base test setup
   base test setup
      
T5 base test teardown
   delete a tenant  t1
   delete a portgroup  p1
   delete a portgroup  p2
   delete a portgroup  p3
   base test teardown
   
add a tenant  [Arguments]  ${tenant} 
  REST add tenant  ${tenant}    

delete a tenant  [Arguments]  ${tenant} 
  	REST delete tenant  ${tenant}    

add a vns  [Arguments]  ${tenant}  ${vns}  
	REST add vns  ${tenant}  ${vns}   

delete a vns  [Arguments]  ${tenant}  ${vns} 
  	REST delete vns  ${tenant}  ${vns}   

add a portgroup  [Arguments]  ${pg}
  	REST add portgroup  ${pg}    

delete a portgroup  [Arguments]  ${pg}
  	REST delete portgroup  ${pg}    

add a endpoint  [Arguments]  ${tenant}  ${vns}  ${endpoint} 
  	REST add endpoint  ${tenant}  ${vns}  ${endpoint}  

delete a endpoint  [Arguments]  ${tenant}  ${vns}  ${endpoint}
  	REST delete endpoint  ${tenant}  ${vns}  ${endpoint}  

add interface to portgroup  [Arguments]  ${switch}  ${intf}  ${pg} 
  	REST add interface to portgroup  ${switch}  ${intf}  ${pg}  

delete interface from portgroup  [Arguments]  ${switch}  ${intf}  ${pg} 
  	REST delete interface from portgroup  ${switch}  ${intf}  ${pg}  

add portgroup to vns  [Arguments]  ${tenant}  ${vns}  ${pg}  ${vlan}
  	REST add portgroup to vns  ${tenant}  ${vns}  ${pg}  ${vlan} 

add portgroup to endpoint  [Arguments]  ${tenant}  ${vns}  ${endpoint}  ${pg}  ${vlan} 
    REST add portgroup to endpoint  ${tenant}  ${vns}  ${endpoint}  ${pg}  ${vlan} 

delete portgroup from vns  [Arguments]  ${tenant}  ${vns}  ${pg}  ${vlan} 
    REST delete portgroup from vns  ${tenant}  ${vns}  ${pg}  ${vlan}
  